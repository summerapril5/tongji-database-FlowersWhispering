(function(){"use strict";var e={5378:function(e,t,s){var o=s(5130),a=s(6768),n={__name:"App",setup(e){return(e,t)=>{const s=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(s)}}};const r=n;var i=r,l=s(1387),c=s(782),u=s(4373);const d=u.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_BASE_URL||"http://www.p1nkhub.com",headers:{"Content-Type":"application/json"}});var m=d;const h={state:{userInfo:null,isAuthenticated:!1},mutations:{SET_USER_INFO(e,t){e.userInfo=t,e.isAuthenticated=!0},CLEAR_USER_INFO(e){e.userInfo=null,e.isAuthenticated=!1},UPDATE_USER_INFO(e,t){e.userInfo&&(e.userInfo={...e.userInfo,...t})}},actions:{async login({commit:e},{usernameOrEmail:t,password:s}){try{const o=await m.post("/api/UserAccount/login",{username:t,password:s});return 200===o.status&&(e("SET_USER_INFO",o.data),!0)}catch(o){throw console.error("登陆失败:",o.response?.data||o.message),new Error(o.response?.data||"登录失败")}},async register({commit:e},{username:t,email:s,password:o,avatar:a}){const n="zh-CN",r="这家伙很懒，什么都没留下",i="不愿透露";try{const e=await m.post("/api/UserAccount/register",{username:t,email:s,password:o,languagePreference:n,bio:r,avatar:a,gender:i});return 200===e.status||(console.error("注册失败:",e.data),!1)}catch(l){throw console.error("注册失败:",l.response?.data||l.message),new Error(l.response?.data||"注册失败")}},async guestLogin({commit:e}){const t={userId:"-1",username:"游客",email:"guest@example.com",languagePreference:"zh-CN",userState:"guest",userRole:"guest",avatar:s(6873)};return e("SET_USER_INFO",t),!0},logout({commit:e}){e("CLEAR_USER_INFO")},async updateUserInfo({commit:e,state:t},{username:s,email:o,password:a,languagePreference:n,bio:r,avatar:i,gender:l}){if(!t.userInfo)throw new Error("用户未登录");try{const c=await m.put("/api/UserAccount/edit/user",{username:s,password:a,email:o,languagePreference:n,bio:r,avatar:i,gender:l,userId:t.userInfo.userId});return 200===c.status?(e("UPDATE_USER_INFO",{username:s,email:o,password:a,languagePreference:n,bio:r,avatar:i,gender:l}),!0):(console.error("用户信息更新失败:",c.data),!1)}catch(c){throw console.error("用户信息更新失败:",c.response?.data||c.message),new Error(c.response?.data||"用户信息更新失败")}}},getters:{getUserInfo(e){return e.userInfo},isAuthenticated(e){return e.isAuthenticated},isAdmin(e){return"admin"===e.userInfo?.userRole},isGuest(e){return"guest"===e.userInfo?.userState}}};var p=h;const k={state:{reviews:[]},mutations:{SET_REVIEWS(e,t){e.reviews=t}},actions:{async fetchAllReviews({commit:e}){try{const t=await m.get("/api/AdminReview/all");return!!t&&(e("SET_REVIEWS",t.data),!0)}catch(t){throw new Error(t.response?.data.message||"查询信息失败")}},async approveReview({dispatch:e},t){try{const s=await m.put(`/api/AdminReview/pass?reviewId=${t}`);return!!s&&(await e("fetchAllReviews"),!0)}catch(s){throw new Error(s.response?.data.message||"操作失败")}},async rejectReview({dispatch:e},t){try{const s=await m.put(`/api/AdminReview/pass/no?reviewId=${t}`);return 200===s.status&&(e("fetchAllReviews"),!0)}catch(s){throw new Error(s.response?.data.message||"操作失败")}}},getters:{getReviews(e){return e.reviews}}};var g=k,v=s(5131);s(4114);const C={state:{announcements:[]},mutations:{SET_ANNOUNCEMENTS(e,t){e.announcements=t},ADD_ANNOUNCEMENT(e,t){e.announcements.push(t)},DELETE_ANNOUNCEMENT(e,t){e.announcements=e.announcements.filter((e=>e.announcementId!==t))}},actions:{async fetchAnnouncements({commit:e}){try{const t=await m.get("/api/AdminAnno/announcement/all");t&&e("SET_ANNOUNCEMENTS",t.data)}catch(t){throw new Error(t.response?.data.message||"获取公告列表失败")}},async publishAnnouncement({commit:e,dispatch:t,rootState:s,rootGetters:o},{title:a,content:n}){try{const s=o.getUserInfo,r=s.userId,i=await m.post("/api/AdminAnno/announcement/publish",{title:a,content:n,publisherId:r});return!!i&&(e("ADD_ANNOUNCEMENT",i.data),await t("fetchAnnouncements"),!0)}catch(r){throw new Error(r.response?.data.message||"发布公告失败")}},async deleteAnnouncement({commit:e},t){try{const s=await m.delete(`/api/AdminAnno/announcement/delete?announcementId=${t}`);return!!s&&(e("DELETE_ANNOUNCEMENT",t),!0)}catch(s){throw new Error(s.response?.data.message||"删除公告失败")}}},getters:{getAnnouncements(e){return e.announcements}}};var L=C;const f={state:{users:[]},mutations:{SET_USERS(e,t){e.users=t}},actions:{async banUser(e,t){try{const e=await m.put(`/api/AdminUser/ban?id=${t}`);return!!e}catch(s){throw new Error(s.response?.data.message||"封禁用户失败")}},async unblockUser(e,t){try{const e=await m.put(`/api/AdminUser/unblock?id=${t}`);return!!e}catch(s){throw new Error(s.response?.data.message||"解封用户失败")}},async fetchAllUsers({commit:e}){try{const t=await m.get("/api/AdminUser/all/user");t&&e("SET_USERS",t.data)}catch(t){throw new Error(t.response?.data.message||"获取用户列表失败")}}},getters:{getAllUsers(e){return e.users}}};var b=f;const P={state:{feedbacks:[]},mutations:{SET_FEEDBACKS(e,t){e.feedbacks=t}},actions:{async fetchAllFeedbacks({commit:e}){try{const t=await m.get("/api/AdminUser/all/feedback");t&&e("SET_FEEDBACKS",t.data)}catch(t){throw new Error(t.response?.data.message||"获取用户反馈列表失败")}}},getters:{getAllFeedbacks(e){return e.feedbacks}}};var w=P;const y={state:{posts:[]},mutations:{SET_POSTS(e,t){e.posts=t},ADD_POST(e,t){e.posts.push(t)},DELETE_POST(e,t){e.posts=e.posts.filter((e=>e.articleId!==t))}},actions:{async fetchAllPosts({commit:e}){try{const t=await m.get("/api/CommuniPostsandComments/post/all");if(t)return e("SET_POSTS",t.data),t.data}catch(t){throw new Error(t.response?.data.message||"获取帖子列表失败")}},async fetchUserPosts({commit:e},t){try{const s=await m.get(`/api/CommuniPostsandComments/post/user/all?userId=${t}`);if(s)return e("SET_POSTS",s.data),s.data}catch(s){throw new Error(s.response?.data.message||"获取用户帖子失败")}},async addPost({commit:e,dispatch:t,rootGetters:s},{title:o,content:a}){try{const n=s.getUserInfo.userId,r=await m.post("/api/CommuniPostsandComments/post/add",{title:o,content:a,publisherId:n});return!!r&&(e("ADD_POST",r.data),await t("fetchAllPosts"),!0)}catch(n){throw new Error(n.response?.data.message||"添加帖子失败")}},async deletePost({commit:e},t){try{const s=await m.delete(`/api/CommuniPostsandComments/post/delete?postId=${t}`);return!!s&&(e("DELETE_POST",t),!0)}catch(s){throw new Error(s.response?.data.message||"删除帖子失败")}},async updatePost({commit:e,dispatch:t},{articleId:s,title:o,content:a,publishedDate:n,publisherId:r}){try{const e=await m.put("/api/CommuniPostsandComments/post/edit",{articleId:s,title:o,content:a,publisherId:r,publishedDate:n});return!!e&&(await t("fetchAllPosts"),!0)}catch(i){throw new Error(i.response?.data.message||"更新帖子失败")}},async searchPosts({commit:e},t){try{const s=await m.get(`/api/CommuniPostsandComments/post/all/search?text=${t}`);if(s)return e("SET_POSTS",s.data),s.data}catch(s){throw new Error(s.response?.data.message||"搜索帖子失败")}}},getters:{getPosts(e){return console.log("从 state 中获取帖子:",e.posts),e.posts}}};var E=y;const A={state:{comments:[]},mutations:{SET_COMMENTS(e,t){e.comments=t},ADD_COMMENT(e,t){e.comments.push(t)},DELETE_COMMENT(e,t){e.comments=e.comments.filter((e=>e.commentId!==t))}},actions:{async addComment({commit:e,rootState:t,rootGetters:s},{articleId:o,content:a}){try{const t=s.getUserInfo.userId,n=await m.post("/api/CommuniPostsandComments/comment/add",{userId:t,articleId:o,content:a});return!!n&&(e("ADD_COMMENT",n.data),!0)}catch(n){throw new Error(n.response?.data.message||"添加评论失败")}},async deleteComment({commit:e},t){try{const s=await m.delete(`/api/CommuniPostsandComments/comment/delete?commentId=${t}`);return!!s&&(e("DELETE_COMMENT",t),!0)}catch(s){throw new Error(s.response?.data.message||"删除评论失败")}},async fetchCommentsByPost({commit:e},t){try{const s=await m.get(`/api/CommuniPostsandComments/comment/all?postId=${t}`);if(s)return e("SET_COMMENTS",s.data),s.data}catch(s){throw new Error(s.response?.data.message||"获取评论列表失败")}},async fetchCommentsByUser({commit:e},t){try{const s=await m.get(`/api/CommuniPostsandComments/comment/user/all?userId=${t}`);if(s)return e("SET_COMMENTS",s.data),s.data}catch(s){throw new Error(s.response?.data.message||"获取用户评论失败")}}},getters:{allComments(e){return e.comments},commentsByArticle:e=>t=>e.comments.filter((e=>e.articleId===t)),commentsByUser:e=>t=>e.comments.filter((e=>e.userId===t))}};var T=A;const I={state:{favorites:[]},mutations:{SET_FAVORITES(e,t){e.favorites=t},ADD_FAVORITE(e,t){e.favorites.push(t)},DELETE_FAVORITE(e,t){e.favorites=e.favorites.filter((e=>e.favorId!==t))}},actions:{async addFavorite({commit:e,rootState:t},s){try{const o=t.currentUser.userId,a=await m.post("/api/CommuniFavor/favor/add",{userId:o,articleId:s});return!!a&&(e("ADD_FAVORITE",a.data),!0)}catch(o){throw console.error("添加收藏失败:",o),new Error(o.response?.data.message||"添加收藏失败")}},async deleteFavorite({commit:e},t){try{const s=await m.delete(`/api/CommuniFavor/favor/delete?favorId=${t}`);return 200===s.status&&(e("DELETE_FAVORITE",t),!0)}catch(s){throw console.error("删除收藏失败:",s),new Error(s.response?.data.message||"删除收藏失败")}},async fetchFavoritesByUser({commit:e},t){try{const s=await m.get(`/api/CommuniFavor/favor/get?userId=${t}`);if(console.log("API:",s),s)return e("SET_FAVORITES",s.data),s.data}catch(s){throw console.error("获取收藏列表失败:",s),new Error(s.response?.data.message||"获取收藏列表失败")}}},getters:{allFavorites(e){return e.favorites},favoriteByArticle:e=>t=>e.favorites.find((e=>e.articleId===t))}};var U=I;const D={state:{scoreList:[],userScore:0},mutations:{SET_SCORE_LIST(e,t){e.scoreList=t},SET_USER_SCORE(e,t){e.userScore=t}},actions:{async fetchScoreRank({commit:e}){try{const t=await m.get("/api/CommuniScore/score/rank");if(t&&t.data)return e("SET_SCORE_LIST",t.data),t.data}catch(t){throw console.error("获取分数排名失败:",t),new Error(t.response?.data.message||"获取分数排名失败")}},async fetchUserScore({commit:e,rootGetters:t}){try{const s=t.getUserInfo.userId,o=await m.get("/api/CommuniScore/score/user",{params:{userId:s}});if(o&&o.data)return e("SET_USER_SCORE",o.data.totalScore),o.data.totalScore}catch(s){throw console.error("获取用户分数失败:",s),new Error(s.response?.data.message||"获取用户分数失败")}}},getters:{allScores(e){return e.scoreList},currentUserScore(e){return e.userScore}}};var F=D,Q=(0,c.y$)({modules:{user:p,adminReview:g,adminAnno:L,adminBanUser:b,adminFeedback:w,post:E,comment:T,favorite:U,score:F},plugins:[(0,v.A)()]}),M=s.p+"media/background.9ff7d69b.mp4",R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACDBJREFUeF7tnVFCYjkQRWFlOisTVzbOyphBxWYQqLxKVRLqnv41ebw6N8cLqPR+xz8IQOAugT1sIACB+wQQhNMBgQcEEITjAQEE4QxAwEeABvFxY5cIAQQRCZoxfQQQxMeNXSIEEEQkaMb0EUAQHzd2iRBAEJGgGdNHAEF83NglQgBBRIJmTB8BBPFxY5cIAQQRCZoxfQQQxMeNXSIEEEQkaMb0EUAQHzd2iRBAEJGgGdNHAEF83NglQgBBRIJmTB8BBPFxY5cIAQQRCZoxfQQQxMeNXSIEEEQkaMb0EUAQHzd2iRBAEJGgGdNHAEF83NglQgBBRIJmTB8BBPFxY5cIAQQRCZoxfQQQxMeNXSIEEEQkaMb0EUAQHzd2iRBAEJGgGdNHAEF83NglQgBBRIJmTB8BBPFxY5cIAQQRCZoxfQQQxMeNXSIE9AT55/1tdzy+7l4Pf4lkHDPmx+Hv3X7/sXt5e4+54HNcRUuQLzkO39F8IEnjIT3Jsdu9fq7e7w9KkugI8n85zicDSSxHLuU4rxWSREOQ23IgiUcOMUnqC/JYDiS5J8mt5rheK9AktQVpkwNJrg9+ixwiTVJXkG1yIMkPgYsX5NZTMAFJagrikwNJtjSHyNOteoL0yaErSY8chZukliAxcuhJEiFHUUlqCfJxOLY+bW5cV//nJJFynKG+HsqcqzKDfGYT2yD1myRDjmJv/dYSBEkai/G/XxxBjiZW9QRBEjt45LAZfa+oKQiS3D8AyNEsx2lhXUGQ5PdBQI5NctQXBEn+HAjk2CyHhiBIwgtylxpfm2o/xboEo/oWMM3RoYeSIIpNghxdcmg1yBmVSpMgR7ccmoIoNAlyhMihK0hlSZAjTA5tQSpKghyhciBIJUmQI1wOBKnywh05UuRAkAo/J0GONDkQ5Brts70FjBypciDILbzPIglypMuBIPcQry4JcgyRA0EeYV5VEuQYJgeCWKhXkwQ5rMTCv67z27xedKtIghzeBLv2IUgLvtmSIEdLSilrEKQV6yxJkKM1oZR1CLIF62hJkGNLOilrEWQr1lGSIMfWZFLWI4gHa7YkyOFJJWUPgnixZknydT9f/2Fm1L9iHwcahaXlOgjSQunemhxJeu7o917k6OKJIF340j4wu/euvvYjRzdHBOlGuKgkyBGRrNDnYoXgenCRlZ5uIUdY2jRIGMpFmgQ5IhOlQUJpni42s0mQIzxOGiQc6SRJkCMjSRokheroJkGOtBhpkDS0g5oEOTITpEFS6WY3CXKkx0eDpCNOahLkGJEcDTKEcnSTIMew2GiQYaiDmgQ5RiZGgwyl3dskyDE8LhpkOHJnkyDHjKRokCnUtzYJckyLiQaZhr6xSZBjZkI0yFT6VpMgx/R4aJDpEdxpEuRYIRkaZIkUrpsEOZaJhQZZJorvJjndz8vb+0q3pXwveoKc/l6DQ7j9zIty0xLk8o+ZeBrTLokwNx1Bbv2lH5LYkohz0xDk0Z/BIsl9SeAm8C5Wy9+II8lvSeD2yaR2g7SEfD4aSPJHErj9sKgryJaQkcQnhwC3moJ45BAI23xFDrdfiOoJ0hOysiRwu/n9o5YgESErSgK3u+VaS5CPw9F8GrFlgcIL90g5zmxfD2XOVZlBPrPJCLuyJPAyv13WEgRJzMB/FiBHE6t6giCJHTxy2Iy+V9QUBEl8vz7SfGyuFhZ+GlpXECT5fdxpjs3fAmoLgiR9PyG3jlPh5vh5t99iUOLr6t851efvOMT1G+QMR/WQqM7dIcXlVh1BFJ9uIUe3JlqCKEmCHN1ynC6gJ4iCJMgRIoeuIJUlQY4wObQFqSgJcoTKgSCVJEGOcDkQpMpbwMiRIgeCXGJ91kP2rPeddqRjL6z5LtY9hs922J7tfmPP7pCrIcg15mc5dM9yn0OOcd6DIMgttqsfvtXvL++8Dr8ygjzb0y3kGCoJgjzCvdphXO1+hh7VOQ+GIBb3VQ7lKvdh8Sr2dQRpCXT24Zz9+C2Miq5BkNZgZx3SWY/byqX4OgTZEvDowzr68bawEFmLIFuDHnVoRz3O1vnF1iOIJ/Dsw5t9fc/MonsQxBt81iE+3c/xePDe1s19Ap8+Esrr4mII0kM2Q5Ke+7m1Fzm6iCJIF76kD8zuvafzfuToJokg3QgXlQQ5IpIV/dCGEHRXF1np6RZyhCVMg4ShXKRJkCMyURoklObpYjObBDnC46RBwpFOkgQ5MpKkQVKojm4S5EiLkQZJQzuoSZAjM0EaJJVudpMgR3p8NEg64qQmQY4RydEgQyhHNwlyDIuNBhmGOqhJkGNkYjTIUNq9TYIcw+OiQYYjdzYJcsxIigaZQn1rkyDHtJhokGnoG5sEOWYmRINMpW81CXJMj4cGmR7BnSZBjhWSoUGWSOG6SZBjmVhokGWi+G6S0/28vL2vdFvK94Igyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCaAIMrpM7tJAEFMRCxQJoAgyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCaAIMrpM7tJAEFMRCxQJoAgyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCaAIMrpM7tJAEFMRCxQJoAgyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCaAIMrpM7tJAEFMRCxQJoAgyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCaAIMrpM7tJAEFMRCxQJoAgyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCaAIMrpM7tJAEFMRCxQJoAgyukzu0kAQUxELFAmgCDK6TO7SQBBTEQsUCbwLyn3PgUb1iA+AAAAAElFTkSuQmCC",X=s.p+"img/community.e1afe2ba.png",x=s.p+"img/admin.cd612869.png",S=s.p+"img/book.aed6ffcd.png";const N={class:"common-layout"},B=(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])],-1),G={class:"main-content"},H=(0,a.Lk)("div",{class:"introduction-card"},[(0,a.Lk)("h1",null,"Flowers Whispering"),(0,a.Lk)("h2",null,"充满诗意与梦想的园地 植物爱好者们的自留地")],-1),V=(0,a.Lk)("div",{class:"introduction-content"},[(0,a.Lk)("p",null,[(0,a.eW)("花语无声,婉转悠扬。欢迎来到flowerwhispering这里将引导您步入一个由花朵与绿植共织的奇幻世界。"),(0,a.Lk)("br"),(0,a.Lk)("br"),(0,a.eW)(" 植物图鉴中蕴藏丰富,每一朵花、每一片叶都有着自己的故事和灵魂。从罕见的野花到庭院中常见的绿植,每一种植物都被赋予了详尽而精美的描述,辅以图片,仿佛置身自然之中,能闻其香、触其绿。"),(0,a.Lk)("br"),(0,a.Lk)("br"),(0,a.eW)(" 植物论坛中激情澎湃,汇聚了一群同样热爱植物的朋友们。或是园艺初学者,或是资深植物爱好者,这里都是你们的俱乐部。分享养植经验,交流种植心得,论坛的讨论涵盖从植物照护到景观设计的各个方面,每一个帖子都充满了知识与热情。"),(0,a.Lk)("br"),(0,a.Lk)("br"),(0,a.eW)(" 我们信仰植物的力量,相信它们能够治愈心灵、修养身心。我们一起耳倾花语,手播绿意,走入一段宁静的幸福旅程。")])],-1),J=(0,a.Lk)("img",{src:R,alt:"Scroll Down",class:"arrow-image"},null,-1),O=[J],K={class:"feature-cards-container"},Z=(0,a.Lk)("img",{src:X,alt:"Community"},null,-1),z=(0,a.Lk)("div",{class:"card-content"},[(0,a.Lk)("h3",null,"Community")],-1),W=(0,a.Lk)("h2",null,"社区",-1),j=(0,a.Lk)("p",null,"加入我们的社区,分享你的植物故事,交流养护心得。",-1),q=[Z,z,W,j],Y=(0,a.Lk)("img",{src:x,alt:"Admin Panel"},null,-1),_=(0,a.Lk)("div",{class:"card-content"},[(0,a.Lk)("h3",null,"Admin Panel")],-1),$=(0,a.Lk)("h2",null,"管理员面板",-1),ee=(0,a.Lk)("p",null,"访问管理员面板,管理用户和内容。",-1),te=[Y,_,$,ee],se=(0,a.Lk)("img",{src:S,alt:"Catalog"},null,-1),oe=(0,a.Lk)("div",{class:"card-content"},[(0,a.Lk)("h3",null,"Catalog")],-1),ae=(0,a.Lk)("h2",null,"图鉴",-1),ne=(0,a.Lk)("p",null,"浏览丰富的植物图鉴,获取详细的植物信息和养护建议。",-1),re=[se,oe,ae,ne];function ie(e,t,s,o,n,r){const i=(0,a.g2)("Header"),l=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)("div",N,[B,(0,a.bF)(i),(0,a.Lk)("main",G,[H,V,(0,a.Lk)("div",{class:"scroll-down-arrow",onClick:t[0]||(t[0]=(...t)=>e.scrollToCards&&e.scrollToCards(...t))},O),(0,a.Lk)("div",K,[(0,a.Lk)("div",{class:"feature-card",onClick:t[1]||(t[1]=t=>e.goToCommunity())},q),e.isAdmin?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"feature-card",onClick:t[2]||(t[2]=t=>e.goToAdminPanel())},te)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"feature-card",onClick:t[3]||(t[3]=t=>e.goToCatalog())},re)])]),(0,a.bF)(l)])}var le=s(4232);const ce=e=>((0,a.Qi)("data-v-71fe3ccc"),e=e(),(0,a.jt)(),e),ue={class:"header"},de=ce((()=>(0,a.Lk)("div",{class:"logo"},"Flowers Whispering",-1))),me={class:"nav-user-container"},he={class:"nav-links"},pe={key:0},ke={class:"user-info"},ge={class:"user-avatar-wrapper"},ve=["src"],Ce={key:0,class:"user-info-list"},Le={key:0},fe={key:1};function be(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("header",ue,[de,(0,a.Lk)("div",me,[(0,a.Lk)("nav",he,[e.currentUser&&"admin"===e.currentUser.userRole?((0,a.uX)(),(0,a.CE)("nav",pe,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.goToAdminPanel&&r.goToAdminPanel(...e)),class:"nav-button"},"管理")])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.goHome&&r.goHome(...e)),class:"nav-button"},"首页"),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.goToCommunity&&r.goToCommunity(...e)),class:"nav-button"},"社区"),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.goToCatalog&&r.goToCatalog(...e)),class:"nav-button"},"图鉴")]),(0,a.Lk)("div",ke,[(0,a.Lk)("div",ge,[(0,a.Lk)("img",{src:e.currentUser?.avatar||"default-avatar.png",alt:"User Avatar",onClick:t[4]||(t[4]=(...e)=>r.handleUserAvatarClick&&r.handleUserAvatarClick(...e))},null,8,ve),e.currentUser?((0,a.uX)(),(0,a.CE)("div",Ce,["guest"!==e.currentUser.userRole?((0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("p",null,"用户名: "+(0,le.v_)(e.currentUser.username),1),(0,a.Lk)("p",null,"邮箱: "+(0,le.v_)(e.currentUser.email),1),(0,a.Lk)("p",null,"角色: "+(0,le.v_)("admin"===e.currentUser.userRole?"管理员":"普通用户"),1)])):((0,a.uX)(),(0,a.CE)("div",fe,[(0,a.Lk)("p",{class:"login-prompt",onClick:t[5]||(t[5]=(...e)=>r.goToLogin&&r.goToLogin(...e))},"点击登录")]))])):(0,a.Q3)("",!0)])])])])}var Pe={computed:{...(0,c.L8)({currentUser:"getUserInfo",isAuthenticated:"isAuthenticated"})},methods:{goToAdminPanel(){this.$router.push("/adminpanel")},goHome(){this.$router.push("/home")},goToCommunity(){this.$router.push("/community")},goToCatalog(){this.$router.push("/catalog")},handleUserAvatarClick(){"guest"===this.currentUser.userRole?this.goToLogin():this.goToUserProfile()},goToUserProfile(){this.$router.push("/userprofile")},goToLogin(){this.$router.push("/login")}},mounted(){this.currentUser||this.$store.dispatch("fetchCurrentUser")}},we=s(1241);const ye=(0,we.A)(Pe,[["render",be],["__scopeId","data-v-71fe3ccc"]]);var Ee=ye;const Ae={class:"footer"},Te=(0,a.Fv)('<p class="left" data-v-643c3a5c><a href="contact.html" data-v-643c3a5c>联系我们</a></p><div class="center" data-v-643c3a5c><span data-v-643c3a5c>© 2024 Flowers Whispering    </span><a href="https://beian.miit.gov.cn/" target="_blank" data-v-643c3a5c>豫ICP备2024087175号-1</a></div><div class="right" data-v-643c3a5c></div>',3),Ie=[Te];function Ue(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("footer",Ae,Ie)}var De={name:"Footer"};const Fe=(0,we.A)(De,[["render",Ue],["__scopeId","data-v-643c3a5c"]]);var Qe=Fe,Me=(0,a.pM)({name:"Home",components:{Header:Ee,Footer:Qe},data(){return{isUserInfoVisible:!1}},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin"})},methods:{...(0,c.i0)(["logout"]),typeEffect(e,t,s=100,o=()=>{}){let a=0;const n=document.createElement("span");function r(){a<t.length?(e.innerHTML=t.substring(0,a+1),e.appendChild(n),a++,setTimeout(r,s)):(n.classList.add("blink"),o&&o())}n.classList.add("typing-cursor"),e.appendChild(n),r()},startTypingEffect(){const e=document.querySelector(".introduction-content p"),t=e.dataset.text||"";e.innerText="",this.typeEffect(e,t,50)},scrollToCards(){const e=document.querySelector(".feature-cards-container"),t=document.querySelector(".scroll-down-arrow");e&&(e.style.display="flex",e.classList.add("visible"),e.scrollIntoView({behavior:"smooth"})),t&&(t.classList.add("fade-out"),t.style.pointerEvents="none")},handleUserAvatarClick(){"guest"===this.currentUser.userRole?this.$router.push("/login"):this.goToUserProfile()},goHome(){this.$router.push("/home")},goToCatalog(){this.$router.push("/catalog")},goToCommunity(){this.$router.push("/community")},goToUserProfile(){this.$router.push("/userprofile")},goToAdminPanel(){this.$router.push("/adminpanel")},performLogout(){this.logout(),this.$router.push("/login")},showUserInfo(){this.isUserInfoVisible=!0},hideUserInfo(){this.isUserInfoVisible=!1}},mounted(){const e=document.querySelector(".introduction-content p");e.dataset.text=e.innerText,e.innerText="",this.startTypingEffect()}});const Re=(0,we.A)(Me,[["render",ie]]);var Xe=Re,xe=s.p+"img/wechat.09d5f844.png",Se=s.p+"img/alipay.09dbd0f1.png",Ne="data:image/png;base64,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";const Be=e=>((0,a.Qi)("data-v-ab9dfa0a"),e=e(),(0,a.jt)(),e),Ge={class:"body"},He=Be((()=>(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])],-1))),Ve={class:"main-box"},Je=Be((()=>(0,a.Lk)("h2",{class:"title"},"注册",-1))),Oe={class:"input-wrapper"},Ke=["src"],Ze={key:1,class:"avatar-placeholder"},ze={class:"input-wrapper"},We={class:"input-wrapper"},je={class:"input-wrapper"},qe={class:"input-wrapper"},Ye=["disabled"],_e=(0,a.Fv)('<h2 class="title" data-v-ab9dfa0a>登录</h2><div class="form__icons" data-v-ab9dfa0a><img class="form__icon" src="'+xe+'" alt="微信登录" data-v-ab9dfa0a><img class="form__icon" src="'+Se+'" alt="支付宝登录" data-v-ab9dfa0a><img class="form__icon" src="'+Ne+'" alt="QQ登录" data-v-ab9dfa0a></div><span class="text" data-v-ab9dfa0a>或使用用户名登录</span>',3),$e=Be((()=>(0,a.Lk)("div",{class:"switch__circle"},null,-1))),et=Be((()=>(0,a.Lk)("div",{class:"switch__circle switch__circle_top"},null,-1))),tt={class:"switch__container"};function st(e,t,s,n,r,i){return(0,a.uX)(),(0,a.CE)("div",Ge,[He,(0,a.Lk)("div",Ve,[(0,a.Lk)("div",{class:(0,le.C4)(["container","container-register",{"is-txl":e.isLogin}])},[(0,a.Lk)("form",null,[Je,(0,a.Lk)("div",Oe,[(0,a.Lk)("div",{class:"avatar-upload-area",onClick:t[0]||(t[0]=(...t)=>e.triggerUpload&&e.triggerUpload(...t))},[e.avatarPreview?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.avatarPreview,alt:"头像预览",class:"avatar-preview"},null,8,Ke)):((0,a.uX)(),(0,a.CE)("div",Ze,"点击上传头像"))]),(0,a.Lk)("input",{id:"avatarUpload",type:"file",accept:"image/*",onChange:t[1]||(t[1]=(...t)=>e.handleAvatarUpload&&e.handleAvatarUpload(...t)),class:"avatar-upload-input"},null,32)]),(0,a.Lk)("div",ze,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.registerForm.username=t),onInput:t[3]||(t[3]=t=>e.handleInput("username")),class:"form__input",type:"username",placeholder:"请输入用户名",required:""},null,544),[[o.Jo,e.registerForm.username]]),e.registerForm.touched.username?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,le.C4)(["validation-feedback",{error:!e.isUsernameValid,success:e.isUsernameValid}])},(0,le.v_)(e.isUsernameValid?"✓ 用户名格式正确":"✗ 用户名不可与邮箱格式相同"),3)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",We,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.registerForm.email=t),onInput:t[5]||(t[5]=t=>e.handleInput("email")),class:"form__input",type:"email",placeholder:"请输入邮箱",required:""},null,544),[[o.Jo,e.registerForm.email]]),e.registerForm.touched.email?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,le.C4)(["validation-feedback",{error:!e.isEmailValid,success:e.isEmailValid}])},(0,le.v_)(e.isEmailValid?"✓ 邮箱格式正确":"✗ 请输入有效的邮箱地址"),3)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",je,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.registerForm.password=t),onInput:t[7]||(t[7]=t=>e.handleInput("password")),class:"form__input",type:"password",placeholder:"请输入密码",required:""},null,544),[[o.Jo,e.registerForm.password]]),e.registerForm.touched.password?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,le.C4)(["validation-feedback",{error:!e.isPasswordValid,success:e.isPasswordValid}])},(0,le.v_)(e.isPasswordValid?"✓ 密码长度有效":"✗ 密码长度必须在8到20个字符之间"),3)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",qe,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.registerForm.confirmPassword=t),onInput:t[9]||(t[9]=t=>e.handleInput("confirmPassword")),class:"form__input",type:"password",placeholder:"请再次输入密码",required:""},null,544),[[o.Jo,e.registerForm.confirmPassword]]),e.registerForm.touched.confirmPassword?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,le.C4)(["validation-feedback",{error:!e.arePasswordsMatching,success:e.arePasswordsMatching}])},(0,le.v_)(e.arePasswordsMatching?"✓ 密码匹配":"✗ 两次输入的密码不一致"),3)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",{class:"form__button",disabled:e.isRegisterDisabled,onClick:t[10]||(t[10]=(...t)=>e.performRegister&&e.performRegister(...t))}," 立即注册 ",8,Ye)])],2),(0,a.Lk)("div",{class:(0,le.C4)(["container","container-login",{"is-txl is-z200":e.isLogin}])},[(0,a.Lk)("form",null,[_e,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=t=>e.loginForm.usernameOrEmail=t),class:"form__input",type:"text",placeholder:"用户名/邮箱",required:""},null,512),[[o.Jo,e.loginForm.usernameOrEmail]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=t=>e.loginForm.password=t),class:"form__input",type:"password",placeholder:"请输入密码",required:""},null,512),[[o.Jo,e.loginForm.password]]),(0,a.Lk)("div",{class:"form__button",onClick:t[13]||(t[13]=(...t)=>e.performLogin&&e.performLogin(...t))},"立即登录"),(0,a.Lk)("div",{class:"form__button guest-button",onClick:t[14]||(t[14]=(...t)=>e.performGuestLogin&&e.performGuestLogin(...t))},"游客登录")])],2),(0,a.Lk)("div",{class:(0,le.C4)(["switch",{login:e.isLogin}])},[$e,et,(0,a.Lk)("div",tt,[(0,a.Lk)("h2",null,(0,le.v_)(e.isLogin?"您好 !":"欢迎回来 !"),1),(0,a.Lk)("p",null,(0,le.v_)(e.isLogin?"如果您还没有账号，请点击下方立即注册按钮进行账号注册":"如果您已经注册过账号，请点击下方立即登录按钮进行登录"),1),(0,a.Lk)("div",{class:"form__button",onClick:t[15]||(t[15]=t=>e.isLogin=!e.isLogin)},(0,le.v_)(e.isLogin?"立即注册":"立即登录"),1)])],2)])])}var ot=s(144),at=(0,a.pM)({name:"Login",setup(){const e=(0,c.Pj)(),t=(0,l.rd)(),o=(0,ot.KR)(!0),n=(0,ot.KR)(null);n.value=s(6873);const r=(0,ot.KR)({usernameOrEmail:"",password:""}),i=(0,ot.KR)({username:"",email:"",password:"",confirmPassword:"",touched:{username:!1,email:!1,password:!1,confirmPassword:!1}});(0,a.wB)(o,(e=>{e?(r.value.usernameOrEmail="",r.value.password=""):(n.value=s(6873),i.value.username="",i.value.email="",i.value.password="",i.value.confirmPassword="",i.value.touched={username:!1,email:!1,password:!1,confirmPassword:!1})}));const u=(0,a.EW)((()=>{const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!e.test(i.value.username)})),d=(0,a.EW)((()=>{const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(i.value.email)})),m=(0,a.EW)((()=>{const e=i.value.password;return e.length>=8&&e.length<=20})),h=(0,a.EW)((()=>i.value.password===i.value.confirmPassword)),p=(0,a.EW)((()=>!u.value||!d.value||!m.value||!h.value)),k=e=>{i.value.touched[e]=!0},g=async()=>{const{usernameOrEmail:s,password:o}=r.value;if(s.trim()&&o.trim())try{const a=await e.dispatch("login",{usernameOrEmail:s,password:o});a&&t.push("/home")}catch(a){alert(a.message||"登录失败")}else alert("用户名/邮箱和密码不能为空！")},v=async()=>{try{const s=await e.dispatch("guestLogin");s?t.push("/home"):alert("游客登录失败，请稍后再试。")}catch(s){alert("游客登录失败，请稍后再试。")}},C=()=>{const e=document.getElementById("avatarUpload");e.click()},L=e=>{const t=e.target.files?.[0];if(t){const e=new FileReader;e.readAsDataURL(t),e.onload=()=>{n.value=e.result,console.log("头像预览数据:",n.value)},e.onerror=()=>{console.error("文件读取失败")}}},f=async()=>{if(p.value)return;const{username:t,email:s,password:a,confirmPassword:r}=i.value;try{const r=await e.dispatch("register",{username:t,email:s,password:a,avatar:n.value});r?(alert("注册成功!请登录"),o.value=!0):alert("注册失败")}catch(l){alert(l.message||"注册失败")}};return{isLogin:o,loginForm:r,registerForm:i,isEmailValid:d,isPasswordValid:m,isUsernameValid:u,arePasswordsMatching:h,isRegisterDisabled:p,handleInput:k,performLogin:g,performGuestLogin:v,performRegister:f,handleAvatarUpload:L,triggerUpload:C,avatarPreview:n}}});const nt=(0,we.A)(at,[["render",st],["__scopeId","data-v-ab9dfa0a"]]);var rt=nt;const it=e=>((0,a.Qi)("data-v-5b6b65e2"),e=e(),(0,a.jt)(),e),lt={class:"admin-panel-page"},ct={class:"top-navbar"},ut={key:0,class:"dropdown"},dt={class:"main-content"},mt={key:0},ht=it((()=>(0,a.Lk)("h2",null,"用户管理",-1))),pt={class:"item-list"},kt={class:"item-details"},gt=it((()=>(0,a.Lk)("strong",null,"ID:",-1))),vt=it((()=>(0,a.Lk)("strong",null,"用户名:",-1))),Ct=it((()=>(0,a.Lk)("strong",null,"邮箱:",-1))),Lt=it((()=>(0,a.Lk)("strong",null,"角色:",-1))),ft={class:"item-actions"},bt=["onClick"],Pt=["onClick"],wt={key:1},yt=it((()=>(0,a.Lk)("h2",null,"帖子管理",-1))),Et={class:"item-list"},At={class:"item-details"},Tt=it((()=>(0,a.Lk)("strong",null,"标题:",-1))),It=it((()=>(0,a.Lk)("strong",null,"发布人:",-1))),Ut=it((()=>(0,a.Lk)("strong",null,"发布时间:",-1))),Dt=["onClick"],Ft={key:0,class:"expanded-content my-animation-slide-bottom"},Qt={class:"item-actions"},Mt=["onClick"],Rt={key:2,class:"plants-review-section"},Xt={class:"plants-column"},xt=it((()=>(0,a.Lk)("h3",null,"已通过审核",-1))),St={class:"item-details"},Nt=it((()=>(0,a.Lk)("strong",null,"修改时间:",-1))),Bt=it((()=>(0,a.Lk)("strong",null,"修改用户:",-1))),Gt=it((()=>(0,a.Lk)("strong",null,"植物ID:",-1))),Ht=["onClick"],Vt={key:0,class:"expanded-content"},Jt={class:"plants-column"},Ot=it((()=>(0,a.Lk)("h3",null,"待审核",-1))),Kt={class:"item-details"},Zt=it((()=>(0,a.Lk)("strong",null,"修改时间:",-1))),zt=it((()=>(0,a.Lk)("strong",null,"修改用户:",-1))),Wt=it((()=>(0,a.Lk)("strong",null,"植物ID:",-1))),jt=["onClick"],qt={key:0,class:"expanded-content"},Yt={class:"item-actions plant-btn"},_t=["onClick"],$t=["onClick"],es={key:3},ts=it((()=>(0,a.Lk)("h2",null,"用户反馈",-1))),ss={class:"item-list"},os={class:"item-details"},as=it((()=>(0,a.Lk)("strong",null,"反馈用户:",-1))),ns=["onClick"],rs={key:0,class:"expanded-content my-animation-slide-bottom"},is=it((()=>(0,a.Lk)("strong",null,"反馈提交时间:",-1))),ls={key:4},cs=it((()=>(0,a.Lk)("h2",null,"公告管理",-1))),us={class:"form-group"},ds=it((()=>(0,a.Lk)("label",{for:"announcement-title"},"标题",-1))),ms={class:"form-group"},hs=it((()=>(0,a.Lk)("label",{for:"announcement-content"},"内容",-1))),ps=it((()=>(0,a.Lk)("button",{type:"submit",class:"btn-submit"},"提交公告",-1))),ks={class:"item-list assignment"},gs={class:"item-details"},vs=it((()=>(0,a.Lk)("strong",null,"标题:",-1))),Cs=it((()=>(0,a.Lk)("strong",null,"发布者:",-1))),Ls=it((()=>(0,a.Lk)("strong",null,"发布日期:",-1))),fs=["onClick"],bs={key:0,class:"expanded-content"},Ps={class:"item-actions"},ws=["onClick"];function ys(e,t,s,n,r,i){return(0,a.uX)(),(0,a.CE)("div",lt,[(0,a.Lk)("aside",ct,[(0,a.Lk)("nav",null,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",{onClick:t[0]||(t[0]=e=>r.currentView="users"),class:(0,le.C4)({active:"users"===r.currentView})},"用户管理",2),(0,a.Lk)("li",{onClick:t[1]||(t[1]=e=>r.currentView="posts"),class:(0,le.C4)({active:"posts"===r.currentView})},"帖子管理",2),(0,a.Lk)("li",{onClick:t[2]||(t[2]=e=>r.currentView="plants"),class:(0,le.C4)({active:"plants"===r.currentView})},"植物审核",2),(0,a.Lk)("li",{onClick:t[3]||(t[3]=e=>r.currentView="feedbacks"),class:(0,le.C4)({active:"feedbacks"===r.currentView})},"用户反馈",2),(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>r.currentView="announcements"),class:(0,le.C4)({active:"announcements"===r.currentView})},"公告发布",2),(0,a.Lk)("li",{onClick:t[5]||(t[5]=(...e)=>i.toggleHomeDropdown&&i.toggleHomeDropdown(...e)),class:(0,le.C4)({"fast-navigater":!0,"active-dropdown":r.showHomeDropdown})},"快速导航 ",2),r.showHomeDropdown?((0,a.uX)(),(0,a.CE)("ul",ut,[(0,a.Lk)("li",{onClick:t[6]||(t[6]=(...e)=>i.goToHomeSection&&i.goToHomeSection(...e))},"返回主页"),(0,a.Lk)("li",{onClick:t[7]||(t[7]=(...e)=>i.goToCatalogueSection&&i.goToCatalogueSection(...e))},"图鉴部分"),(0,a.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>i.goToCommunitySection&&i.goToCommunitySection(...e))},"社区部分")])):(0,a.Q3)("",!0)])])]),(0,a.Lk)("main",dt,["users"===r.currentView?((0,a.uX)(),(0,a.CE)("div",mt,[ht,(0,a.Lk)("ul",pt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredUsers,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.userId,class:"item"},[(0,a.Lk)("div",kt,[(0,a.Lk)("p",null,[gt,(0,a.eW)(" "+(0,le.v_)(e.userId),1)]),(0,a.Lk)("p",null,[vt,(0,a.eW)(" "+(0,le.v_)(e.userName),1)]),(0,a.Lk)("p",null,[Ct,(0,a.eW)(" "+(0,le.v_)(e.uemail),1)]),(0,a.Lk)("p",null,[Lt,(0,a.eW)((0,le.v_)(e.userrole),1)])]),(0,a.Lk)("div",ft,["active"==e.userstatus?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>i.changeUserState(e),class:"btn-edit btn-ban my-animation-slide-bottom"},"封禁",8,bt)):((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>i.changeUserState(e),class:"btn-edit btn-release my-animation-slide-bottom"},"解封",8,Pt))])])))),128))])])):(0,a.Q3)("",!0),"posts"===r.currentView?((0,a.uX)(),(0,a.CE)("div",wt,[yt,(0,a.Lk)("ul",Et,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.posts,(t=>((0,a.uX)(),(0,a.CE)("li",{key:t.articleId,class:"item"},[(0,a.Lk)("div",At,[(0,a.Lk)("p",null,[Tt,(0,a.eW)(" "+(0,le.v_)(t.title),1)]),(0,a.Lk)("p",null,[It,(0,a.eW)(" "+(0,le.v_)(t.username),1)]),(0,a.Lk)("p",null,[Ut,(0,a.eW)(" "+(0,le.v_)(t.publishedDate),1)]),(0,a.Lk)("button",{onClick:e=>i.toggleExpandPost(t),class:"btn-details my-animation-slide-top"},(0,le.v_)(r.expandedPost===t?"收起":"展开")+"内容 ",9,Dt)]),r.expandedPost===t?((0,a.uX)(),(0,a.CE)("div",Ft,[(0,a.Lk)("p",null,(0,le.v_)(t.content),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Qt,[(0,a.Lk)("button",{onClick:s=>e.deletePost(t.articleId),class:"btn-delete my-animation-slide-bottom"},"删除",8,Mt)])])))),128))])])):(0,a.Q3)("",!0),"plants"===r.currentView?((0,a.uX)(),(0,a.CE)("div",Rt,[(0,a.Lk)("div",Xt,[xt,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.approvedReviews,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.reviewId,class:"table-row"},[(0,a.Lk)("div",St,[(0,a.Lk)("p",null,[Nt,(0,a.eW)(" "+(0,le.v_)(e.submittedDate),1)]),(0,a.Lk)("p",null,[Bt,(0,a.eW)(" "+(0,le.v_)(e.submitterId),1)]),(0,a.Lk)("p",null,[Gt,(0,a.eW)((0,le.v_)(e.plantId),1)]),(0,a.Lk)("button",{onClick:t=>i.toggleExpandedaApprovedReviews(e),class:"btn-details"},(0,le.v_)(r.expandedApprovedReviews===e?"收起":"展示")+"修改信息 ",9,Ht)]),r.expandedApprovedReviews===e?((0,a.uX)(),(0,a.CE)("div",Vt,[(0,a.Lk)("p",null,(0,le.v_)(e.modifiedContent),1)])):(0,a.Q3)("",!0)])))),128))]),(0,a.Lk)("div",Jt,[Ot,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.pendingReviews,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.reviewId,class:"table-row"},[(0,a.Lk)("div",Kt,[(0,a.Lk)("p",null,[Zt,(0,a.eW)(" "+(0,le.v_)(e.submittedDate),1)]),(0,a.Lk)("p",null,[zt,(0,a.eW)(" "+(0,le.v_)(e.submitterId),1)]),(0,a.Lk)("p",null,[Wt,(0,a.eW)((0,le.v_)(e.plantId),1)]),(0,a.Lk)("button",{onClick:t=>i.toggleExpandePendingReviews(e),class:"btn-details"},(0,le.v_)(r.expandedPendingReviews===e?"收起":"展示")+"修改信息 ",9,jt)]),r.expandedPendingReviews===e?((0,a.uX)(),(0,a.CE)("div",qt,[(0,a.Lk)("p",null,(0,le.v_)(e.modifiedContent),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Yt,[(0,a.Lk)("button",{onClick:t=>i.approveRev(e.reviewId),class:"btn-edit btn-release my-animation-slide-bottom"},"通过",8,_t),(0,a.Lk)("button",{onClick:t=>i.rejectRev(e.reviewId),class:"btn-edit btn-ban my-animation-slide-bottom"},"拒绝",8,$t)])])))),128))])])):(0,a.Q3)("",!0),"feedbacks"===r.currentView?((0,a.uX)(),(0,a.CE)("div",es,[ts,(0,a.Lk)("ul",ss,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.feedbacks,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.feedbackId,class:"item"},[(0,a.Lk)("div",os,[(0,a.Lk)("p",null,[as,(0,a.eW)(" "+(0,le.v_)(e.userId),1)]),(0,a.Lk)("button",{onClick:t=>i.toggleExpandFeedback(e),class:"btn-details my-animation-slide-bottom"},(0,le.v_)(r.expandedFeedback===e?"收起":"展开")+"详情 ",9,ns)]),r.expandedFeedback===e?((0,a.uX)(),(0,a.CE)("div",rs,[(0,a.Lk)("p",null,(0,le.v_)(e.feedbackContent),1),(0,a.Lk)("p",null,[is,(0,a.eW)(" "+(0,le.v_)(e.submittedDate),1)])])):(0,a.Q3)("",!0)])))),128))])])):(0,a.Q3)("",!0),"announcements"===r.currentView?((0,a.uX)(),(0,a.CE)("div",ls,[cs,(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.toggleAddAnnouncementForm&&i.toggleAddAnnouncementForm(...e)),class:"btn-toggle-form my-animation-slide-top"},(0,le.v_)(r.showAddAnnouncementForm?"取消":"添加公告"),1),r.showAddAnnouncementForm?((0,a.uX)(),(0,a.CE)("form",{key:0,onSubmit:t[12]||(t[12]=(0,o.D$)(((...e)=>i.handleAddAnnouncement&&i.handleAddAnnouncement(...e)),["prevent"])),class:"form-container"},[(0,a.Lk)("div",us,[ds,(0,a.bo)((0,a.Lk)("input",{id:"announcement-title","onUpdate:modelValue":t[10]||(t[10]=e=>r.newAnnouncement.title=e),placeholder:"请输入标题",class:"form-input"},null,512),[[o.Jo,r.newAnnouncement.title]])]),(0,a.Lk)("div",ms,[hs,(0,a.bo)((0,a.Lk)("textarea",{id:"announcement-content","onUpdate:modelValue":t[11]||(t[11]=e=>r.newAnnouncement.content=e),placeholder:"请输入内容",class:"form-input"},null,512),[[o.Jo,r.newAnnouncement.content]])]),ps],32)):(0,a.Q3)("",!0),(0,a.Lk)("ul",ks,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.announcements,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.announcementId,class:"item"},[(0,a.Lk)("div",gs,[(0,a.Lk)("p",null,[vs,(0,a.eW)(" "+(0,le.v_)(e.title),1)]),(0,a.Lk)("p",null,[Cs,(0,a.eW)(" "+(0,le.v_)(e.publisherId),1)]),(0,a.Lk)("p",null,[Ls,(0,a.eW)(" "+(0,le.v_)(e.publishedDate),1)]),(0,a.Lk)("button",{onClick:t=>i.toggleExpandAnnouncement(e),class:"btn-details"},(0,le.v_)(r.expandedAnnouncement===e?"收起":"展示")+"内容 ",9,fs)]),r.expandedAnnouncement===e?((0,a.uX)(),(0,a.CE)("div",bs,[(0,a.Lk)("p",null,(0,le.v_)(e.content),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Ps,[(0,a.Lk)("button",{onClick:t=>i.handleDeleteAnnouncement(e.announcementId),class:"btn-delete my-animation-slide-bottom"},"删除",8,ws)])])))),128))])])):(0,a.Q3)("",!0)])])}var Es={name:"AdminPanel",data(){return{currentView:"users",showAddUserForm:!1,showAddAnnouncementForm:!1,expandedPost:null,expandedFeedback:null,expandedAnnouncement:null,expandedApprovedReviews:null,expandedPendingReviews:null,showHomeDropdown:!1,newUser:{username:"",email:"",password:"",role:""},newAnnouncement:{title:"",content:""}}},computed:{...(0,c.L8)(["getAllUsers","getPosts","getAllFeedbacks","getAnnouncements","getReviews"]),users(){return console.log("从 Vuex 获取的用户数据:",this.getAllUsers),this.getAllUsers},filteredUsers(){return this.users.filter((e=>"user"===e.userrole))},posts(){return this.getPosts},comments(){return this.allComments},feedbacks(){return this.getAllFeedbacks},announcements(){return this.getAnnouncements},approvedReviews(){return this.getReviews.filter((e=>"审核通过"===e.reviewStatus))},pendingReviews(){return this.getReviews.filter((e=>"待审核"===e.reviewStatus))}},methods:{...(0,c.i0)(["banUser","unblockUser","deletePost","deleteComment","deleteAnnouncement","publishAnnouncement","fetchAnnouncements","fetchAllFeedbacks","fetchAllReviews","fetchAllPosts","fetchAllUsers","approveReview","rejectReview"]),changeUserState(e){this.fetchAllUsers(),"active"==e.userstatus?this.banUser(e.userId):this.unblockUser(e.userId),this.fetchAllUsers()},toggleExpandAnnouncement(e){this.expandedAnnouncement===e?this.expandedAnnouncement=null:this.expandedAnnouncement=e},toggleExpandedaApprovedReviews(e){this.expandedApprovedReviews===e?this.expandedApprovedReviews=null:this.expandedApprovedReviews=e},toggleExpandePendingReviews(e){this.expandedPendingReviews===e?this.expandedPendingReviews=null:this.expandedPendingReviews=e},toggleHomeDropdown(){this.showHomeDropdown=!this.showHomeDropdown},goToHomeSection(){this.$router.push({name:"Home"}),this.showHomeDropdown=!1},goToCatalogueSection(){this.$router.push("/catalog"),this.showHomeDropdown=!1},goToCommunitySection(){this.$router.push("/community"),this.showHomeDropdown=!1},toggleAddUserForm(){this.showAddUserForm=!this.showAddUserForm},handleAddUser(){this.newUser.username&&this.newUser.email&&this.newUser.password&&(this.addUser({...this.newUser}),this.newUser={username:"",email:"",password:"",role:""},this.showAddUserForm=!1)},handleDeletePost(e){this.deletePost(e)},handleDeleteComment(e){this.deleteComment(e)},toggleAddAnnouncementForm(){this.showAddAnnouncementForm=!this.showAddAnnouncementForm},handleAddAnnouncement(){if(this.newAnnouncement.title&&this.newAnnouncement.content){const e={...this.newAnnouncement,id:Date.now(),date:(new Date).toLocaleDateString()};this.publishAnnouncement(e),this.newAnnouncement={title:"",content:""},this.showAddAnnouncementForm=!1}else alert("请填写公告的标题和内容")},handleDeleteAnnouncement(e){this.deleteAnnouncement(e)},toggleExpandPost(e){this.expandedPost=this.expandedPost===e?null:e},toggleExpandFeedback(e){this.expandedFeedback=this.expandedFeedback===e?null:e},approveRev(e){this.fetchAllReviews(),this.approveReview(e),this.fetchAllReviews()},rejectRev(e){this.fetchAllReviews(),this.rejectReview(e),this.fetchAllReviews()},editPlant(e){e.editing=!0},finishEditPlant(e){e.editing=!1},approvePlant(e){e.approved=!0},deletePlant(e){this.$store.commit("DELETE_PLANT",e)}},mounted(){this.fetchAnnouncements(),this.fetchAllFeedbacks(),this.fetchAllReviews(),this.fetchAllPosts(),this.fetchAllUsers()}};const As=(0,we.A)(Es,[["render",ys],["__scopeId","data-v-5b6b65e2"]]);var Ts=As,Is=s.p+"img/plant_book.fd0cfcf4.png",Us=s.p+"img/plant_tool.34df2c55.png";const Ds=(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1),Fs={class:"user-interface"},Qs={class:"side-bar"},Ms={class:"user-info"},Rs={class:"user-name"},Xs={class:"tabs"},xs={class:"top-banner"},Ss=["src"],Ns={class:"card-container"},Bs=(0,a.Lk)("img",{src:Is,alt:"Card 1"},null,-1),Gs=(0,a.Lk)("div",{class:"card-info"},"搜寻植物信息",-1),Hs=[Bs,Gs],Vs=(0,a.Lk)("img",{src:Us,alt:"Card 3"},null,-1),Js=(0,a.Lk)("div",{class:"card-info"},"植物识别工具",-1),Os=[Vs,Js];function Ks(e,t,s,o,n,r){const i=(0,a.g2)("Header"),l=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(i),Ds,(0,a.Lk)("div",Fs,[(0,a.Lk)("div",Qs,[(0,a.Lk)("div",Ms,[(0,a.Lk)("p",Rs,(0,le.v_)(e.userName),1),(0,a.Lk)("div",Xs,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.GoToHome&&r.GoToHome(...e))},"返回主页")])])]),(0,a.Lk)("div",xs,[(0,a.Lk)("button",{class:"user-button",onClick:t[1]||(t[1]=(...t)=>e.Gotouserpage&&e.Gotouserpage(...t))},[(0,a.Lk)("img",{src:e.currentUser.avatar,alt:"User"},null,8,Ss)])]),(0,a.Lk)("div",Ns,[(0,a.Lk)("div",{class:"card",onClick:t[2]||(t[2]=e=>r.GoToBook())},Hs),(0,a.Lk)("div",{class:"card",onClick:t[3]||(t[3]=e=>r.GoToRecognition())},Os)])]),(0,a.bF)(l)],64)}var Zs={name:"Catalog",components:{Header:Ee,Footer:Qe},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin"})},mounted(){window.scrollTo(0,0)},methods:{handleUserAvatarClick(){"guest"===this.currentUser.role?this.goToLogin():this.goToUserProfile()},goToCommunity(){this.$router.push("/community")},goToCatalog(){this.$router.push("/catalog")},goToLogin(){this.$router.push("/login")},goToUserProfile(){this.$router.push("/userprofile")},GoToFavorites(){},GoToHome(){this.$router.push("/home")},GoToSubmissions(){},goToAdminPanel(){this.$router.push("/adminpanel")},goHome(){this.$router.push("/home")},GoToBook(){this.$router.push("/search")},GoToCultivation(){},GoToRecognition(){this.$router.push("/recognition")}}};const zs=(0,we.A)(Zs,[["render",Ks]]);var Ws=zs;const js=e=>((0,a.Qi)("data-v-32a02864"),e=e(),(0,a.jt)(),e),qs=js((()=>(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),Ys={class:"search-interface"},_s={class:"side-bar"},$s={class:"user-info"},eo={class:"user-name"},to={class:"tabs"},so=js((()=>(0,a.Lk)("div",{class:"top-banner"},null,-1))),oo={key:0},ao=js((()=>(0,a.Lk)("div",{class:"search-logo"},null,-1))),no={class:"search-box"},ro={key:1,class:"favorite-plants-container"},io=js((()=>(0,a.Lk)("h2",{class:"favorite-title"},"我的收藏",-1))),lo={class:"favorite-plants-list"},co=["onClick"],uo=["onClick"],mo={class:"pagination"},ho=["disabled"],po=["disabled"],ko={key:2,class:"favorite-plants-container"},go=js((()=>(0,a.Lk)("h2",{class:"search-contribution-title"},"贡献词条",-1))),vo={class:"search-contribution-list"},Co=["onClick"],Lo={class:"pagination"},fo=["disabled"],bo=["disabled"],Po={class:"search-contribution-button-container"},wo={key:3,class:"new-plants-container"},yo=js((()=>(0,a.Lk)("h2",{class:"new-plants-title"},"最新品种",-1))),Eo={class:"new-plants-list"},Ao={class:"new-plant-header"},To=["onClick"],Io={class:"update-time"},Uo={class:"pagination"},Do=["disabled"],Fo=["disabled"];function Qo(e,t,s,n,r,i){const l=(0,a.g2)("Header"),c=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l),qs,(0,a.Lk)("div",Ys,[(0,a.Lk)("div",_s,[(0,a.Lk)("div",$s,[(0,a.Lk)("p",eo,(0,le.v_)(r.userName),1),(0,a.Lk)("div",to,[(0,a.Lk)("button",{class:(0,le.C4)({active:"search"===r.activeTab}),onClick:t[0]||(t[0]=e=>i.setActiveTab("search"))},"百科搜索",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Myfavorited"===r.activeTab}),onClick:t[1]||(t[1]=e=>i.setActiveTab("Myfavorited"))},"我的收藏",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"contribution"===r.activeTab}),onClick:t[2]||(t[2]=e=>i.setActiveTab("contribution"))},"贡献词条",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"new"===r.activeTab}),onClick:t[3]||(t[3]=e=>i.setActiveTab("new"))},"最新品种",2),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.TestPage&&i.TestPage(...e))},"页面测试"),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.ErrorPage&&i.ErrorPage(...e))},"错误测试"),(0,a.Lk)("button",{class:(0,le.C4)({active:"home"===r.activeTab}),onClick:t[6]||(t[6]=(...e)=>i.GoToHome&&i.GoToHome(...e))},"返回上步",2)])])]),so,"search"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",oo,[ao,(0,a.Lk)("div",no,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>r.searchQuery=e),placeholder:"输入植物名称，去一探究竟吧！",class:"search-input"},null,512),[[o.Jo,r.searchQuery]]),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.searchDatabase&&i.searchDatabase(...e)),class:"search-button"},"搜索")])])):(0,a.Q3)("",!0),"Myfavorited"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",ro,[io,(0,a.Lk)("ul",lo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedFavoritePlants,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t,class:"favorite-plant-item"},[(0,a.Lk)("span",{onClick:t=>i.viewPlantDetail(e.Plantid,e.Plantname),class:"plant-name"},(0,le.v_)(e.Plantname),9,co),(0,a.Lk)("button",{onClick:t=>i.removeFromFavorites(e.id),class:"remove-button"},"取消收藏",8,uo)])))),128))]),(0,a.Lk)("div",mo,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.prevPage&&i.prevPage(...e)),disabled:1===r.currentPage},"上一页",8,ho),(0,a.Lk)("span",null,"页码 "+(0,le.v_)(r.currentPage)+" / "+(0,le.v_)(i.totalPages),1),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>i.nextPage&&i.nextPage(...e)),disabled:r.currentPage===i.totalPages},"下一页",8,po)])])):(0,a.Q3)("",!0),"contribution"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",ko,[go,(0,a.Lk)("ul",vo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedContributions,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t,class:"search-contribution-item"},[(0,a.Lk)("span",{class:(0,le.C4)(["search-contribution-plant-name",{clickable:"已通过"===e.status}]),onClick:t=>"已通过"===e.status?i.viewPlantDetail(e.Plantid,e.Plantname):null},(0,le.v_)(e.Plantname),11,Co),(0,a.Lk)("span",{class:(0,le.C4)(["review-status",{"status-pending":"未审核"===e.status,"status-approved":"已通过"===e.status,"status-rejected":"未通过"===e.status}])},(0,le.v_)(e.status),3)])))),128))]),(0,a.Lk)("div",Lo,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.prevContributionPage&&i.prevContributionPage(...e)),disabled:1===r.contributionPage},"上一页",8,fo),(0,a.Lk)("span",null,"页码 "+(0,le.v_)(r.contributionPage)+" / "+(0,le.v_)(i.contributionTotalPages),1),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.nextContributionPage&&i.nextContributionPage(...e)),disabled:r.contributionPage===i.contributionTotalPages},"下一页",8,bo)]),(0,a.Lk)("div",Po,[(0,a.Lk)("button",{class:"search-contribution-button",onClick:t[13]||(t[13]=(...e)=>i.GoToContributionPage&&i.GoToContributionPage(...e))},"我要贡献")])])):(0,a.Q3)("",!0),"new"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",wo,[yo,(0,a.Lk)("ul",Eo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedNewPlants,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t,class:"new-plant-item"},[(0,a.Lk)("div",Ao,[(0,a.Lk)("span",{onClick:t=>i.viewPlantDetail(e.Plantid,e.Plantname),class:"new-plant-name"},(0,le.v_)(e.Plantname),9,To),(0,a.Lk)("span",Io,(0,le.v_)(e.updateTime),1)])])))),128))]),(0,a.Lk)("div",Uo,[(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.prevNewPlantsPage&&i.prevNewPlantsPage(...e)),disabled:1===r.newPlantsPage},"上一页",8,Do),(0,a.Lk)("span",null,"页码 "+(0,le.v_)(r.newPlantsPage)+" / "+(0,le.v_)(i.newPlantsTotalPages),1),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>i.nextNewPlantsPage&&i.nextNewPlantsPage(...e)),disabled:r.contributionPage===i.newPlantsTotalPages},"下一页",8,Fo)])])):(0,a.Q3)("",!0)]),(0,a.bF)(c)],64)}var Mo={name:"Search",components:{Header:Ee,Footer:Qe},data(){return{buttonImageUrl:"../catalog/images/user_example.png",userName:"Wuhuairline",searchQuery:"",activeTab:"search",favoritePlants:[],currentPage:1,itemsPerPage:10,contributions:[],contributionPage:1,contributionItemsPerPage:8,newPlants:[],newPlantsPage:1,newPlantsItemsPerPage:8}},mounted(){window.scrollTo(0,0),this.loadFavorites(),this.loadContributions(),this.loadNewPlants()},computed:{...(0,c.aH)({currentUser:e=>e.currentUser,userAvatar:e=>e.userAvatar}),...(0,c.L8)(["userAvatar"]),totalPages(){return Math.ceil(this.favoritePlants.length/this.itemsPerPage)},paginatedFavoritePlants(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.favoritePlants.slice(e,t)},contributionTotalPages(){return Math.ceil(this.contributions.length/this.contributionItemsPerPage)},paginatedContributions(){const e=(this.contributionPage-1)*this.contributionItemsPerPage,t=e+this.contributionItemsPerPage;return this.contributions.slice(e,t)},newPlantsTotalPages(){return Math.ceil(this.newPlants.length/this.newPlantsItemsPerPage)},paginatedNewPlants(){const e=(this.newPlantsPage-1)*this.newPlantsItemsPerPage,t=e+this.newPlantsItemsPerPage;return this.newPlants.slice(e,t)}},methods:{toggleUserMenu(){this.showUserMenu=!this.showUserMenu},handleUserAvatarClick(){"guest"===this.currentUser.role?this.$router.push("/login"):this.goToUserProfile()},goToUserProfile(){this.$router.push("/userprofile")},goToCommunity(){this.$router.push("/community")},goToCatalog(){this.$router.push("/catalog")},goHome(){this.$router.push("/home")},goToAdminPanel(){this.$router.push("/adminpanel")},GoToHome(){this.$router.push("/catalog")},GoToContributionPage(){this.$router.push("/Contribution")},searchDatabase(){console.log(`Searching for: ${this.searchQuery}`)},setActiveTab(e){this.activeTab=e},loadFavorites(){this.favoritePlants=[{id:1,Plantname:"蒲公英"},{id:2,Plantname:"玫瑰"},{id:3,Plantname:"百合"},{id:4,Plantname:"竹子"},{id:5,Plantname:"兰花"},{id:6,Plantname:"茉莉花"},{id:7,Plantname:"绿萝"},{id:8,Plantname:"牡丹"},{id:9,Plantname:"柳树"},{id:10,Plantname:"向日葵"},{id:10,Plantname:"豌豆射手"}]},loadContributions(){this.contributions=[{id:1,Plantname:"铁线莲",status:"未审核"},{id:2,Plantname:"杜鹃花",status:"已通过"},{id:3,Plantname:"水仙花",status:"未通过"},{id:4,Plantname:"菊花",status:"未通过"},{id:5,Plantname:"紫罗兰",status:"已通过"},{id:6,Plantname:"凤梨",status:"未通过"},{id:7,Plantname:"地瓜",status:"未审核"},{id:8,Plantname:"土豆",status:"未审核"},{id:9,Plantname:"香蕉",status:"未审核"},{id:10,Plantname:"杨桃",status:"已通过"}]},loadNewPlants(){this.newPlants=[{id:1,Plantname:"铁线莲",updateTime:"2024年9月1日"},{id:2,Plantname:"杜鹃花",updateTime:"2024年8月30日"},{id:3,Plantname:"水仙花",updateTime:"2024年8月25日"},{id:4,Plantname:"菊花",updateTime:"2024年8月20日"},{id:5,Plantname:"紫罗兰",updateTime:"2024年8月15日"},{id:6,Plantname:"凤梨",updateTime:"2024年8月10日"},{id:7,Plantname:"地瓜",updateTime:"2024年8月5日"},{id:8,Plantname:"土豆",updateTime:"2024年8月1日"},{id:9,Plantname:"香蕉",updateTime:"2024年7月28日"},{id:10,Plantname:"杨桃",updateTime:"2024年7月20日"}]},removeFromFavorites(e){const t=this.favoritePlants.find((t=>t.id===e));this.favoritePlants=this.favoritePlants.filter((t=>t.id!==e)),console.log(`删除植物的名字: ${t.Plantname}`)},TestPage(){this.$router.push("/information")},ErrorPage(){this.$router.push("/FindError")},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevContributionPage(){this.contributionPage>1&&this.contributionPage--},nextContributionPage(){this.contributionPage<this.contributionTotalPages&&this.contributionPage++},prevNewPlantsPage(){this.newPlantsPage>1&&this.newPlantsPage--},nextNewPlantsPage(){this.newPlantsPage<this.newPlantsTotalPages&&this.newPlantsPage++},viewPlantDetail(e,t){this.$router.push(`/plant/${e}`),console.log(`前往植物的名字: ${t}`)}}};const Ro=(0,we.A)(Mo,[["render",Qo],["__scopeId","data-v-32a02864"]]);var Xo=Ro,xo=s.p+"img/return_icon.46f2a8a3.png";const So=e=>((0,a.Qi)("data-v-d5b032c6"),e=e(),(0,a.jt)(),e),No=So((()=>(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),Bo=So((()=>(0,a.Lk)("img",{src:xo,alt:"返回"},null,-1))),Go=[Bo],Ho={class:"information-top"},Vo=So((()=>(0,a.Lk)("div",{class:"information-logo"},null,-1))),Jo=So((()=>(0,a.Lk)("p",null,"叶语百科",-1))),Oo={class:"information-box"},Ko={class:"information-page"},Zo={class:"sidebar"},zo=So((()=>(0,a.Lk)("h2",null,"目录",-1))),Wo=["href"],jo={class:"content"},qo={key:0,class:"plant-info"},Yo={class:"plant-name"},_o=["id"],$o={class:"info-sidebar"},ea={class:"info-sidebar-image"},ta=["src"],sa={class:"info-sidebar-categories"},oa=So((()=>(0,a.Lk)("h3",null,"科学分类",-1)));function aa(e,t,s,n,r,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[No,(0,a.Lk)("button",{class:"return-button",onClick:t[0]||(t[0]=(...e)=>i.GoBack&&i.GoBack(...e))},Go),(0,a.Lk)("div",Ho,[Vo,Jo,(0,a.Lk)("div",Oo,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),placeholder:"输入植物名称，去一探究竟吧！",class:"information-input"},null,512),[[o.Jo,r.searchQuery]]),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.searchDatabase&&i.searchDatabase(...e)),class:"information-button"},"搜索")])]),(0,a.Lk)("div",Ko,[(0,a.Lk)("div",Zo,[zo,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.subTitles,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("a",{href:"#subsection-"+t},(0,le.v_)(e),9,Wo)])))),128))])]),(0,a.Lk)("div",jo,[r.plant?((0,a.uX)(),(0,a.CE)("div",qo,[(0,a.Lk)("h1",Yo,(0,le.v_)(r.plant.name),1),(0,a.Lk)("button",{class:(0,le.C4)(["favorite-button",{favorited:r.isFavorited}]),onClick:t[3]||(t[3]=(...e)=>i.GoToFavorite&&i.GoToFavorite(...e))},(0,le.v_)(r.isFavorited?"取消收藏":"收藏"),3)])):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.plant.contents,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,id:"subsection-"+t,class:"subsection"},[(0,a.Lk)("h2",null,(0,le.v_)(r.subTitles[t]),1),(0,a.Lk)("p",null,(0,le.v_)(e),1)],8,_o)))),128))]),(0,a.Lk)("div",$o,[(0,a.Lk)("div",ea,[(0,a.Lk)("img",{src:r.plant.image,alt:"植物图片",class:"plant-image"},null,8,ta)]),(0,a.Lk)("div",sa,[oa,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.classificationList,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"classification-item"},(0,le.v_)(e.value),1)))),128))])])])],64)}var na={name:"Information",data(){return{searchQuery:"",isFavorited:!1,plant:{name:"绿萝",image:s(5323),contents:["绿萝（学名：Epipremnum aureum），又名黄金葛，是天南星科、麒麟叶属的一种多年生木质藤本植物[1]，原产于法属波利尼西亚的莫雷阿岛[2]，随着人类引进而在东南亚、南亚、华南、所罗门群岛、非洲、西印度群岛等地的热带及亚热带森林中归化[2][3]，并在部分地区成为入侵物种，影响一些地方的生态平衡。喜荫蔽潮湿的环境，生命力极强，在黑暗无光的条件下亦能生存[4]。现作为观叶植物而被广泛栽培于人类居住和活动场所，因其枝茎善于攀缘的特性，适宜吊盆栽植或植于图腾柱上。","绿萝在热带地区常攀援生长在雨林的岩石和树干上，可长成巨大的藤本植物。绿萝喜高温、高湿、有明亮散射光的环境。耐阴，但过于阴蔽时，叶片上色斑不明显或消失。忌烈日暴晒，生长适温20~30℃，稍耐寒，5℃以上可安全越冬。要求肥沃、疏松、湿润的土壤。耐水湿，可用水插莳养，稍耐旱 [2]。具有较强的耐尘性，对环境要求低","水分绿萝属于观叶类植物，叶片较多且叶面积较大，体内水分蒸腾较快，所以水分供给要充足。夏季高温干旱时，每天傍晚时浇1次水，中午还要向叶面喷水降温，增大盆花周围环境的湿度，以避免叶片在高温下受到伤害。冬季由于温度低，绿萝生长缓慢，其需水量也减少，不可浇水过多 [14]。肥料绿萝施肥以氮肥为主，辅以磷钾肥，要薄肥勤施。春季绿萝生长期到来前，每隔10d左右施硫酸或0.3%尿素溶液1次，并用 0.5%~1%的尿素溶液进行叶面施肥1次，这样既能满足绿萝生长需要，又能保持叶片绿色光亮。秋冬季节应减少施肥，施肥以叶面喷施为主，通过叶面上气孔吸收肥料，肥效可直接作用于叶面。叶面肥要用专用肥，普通无机肥不易被叶面吸收 [15]。养护管理光照绿萝属阴性植物，忌阳光直射，喜散射光，较耐阴，因此要把绿萝摆在室内光照最好的地方，或在正午搬到密封的阳台上晒太阳。光照不足和阳光直射都会使叶面上美丽的斑纹消失，有损其观赏价值 [15]。温度一般家中室温即可，建议室温控制在20℃左右，温度只要不低于10℃，绿萝即可安全过冬 [8]。土壤以疏松、富含有机质的微酸性和中性沙壤土栽培，其发育最好 [15]。修剪为保持绿萝良好的株型，要截短过长的茎蔓和紊乱的枝条，使其长短有致，疏密适当 [11]。一般将离盆土20cm的枝叶剪掉，长出新叶后再将底部的老叶剪除。盆栽绿萝一般都栽有棕柱，当绿萝的茎蔓爬满棕柱且枝条生长至20cm左右时，需要进行修剪 [8]。"]},subTitles:["植物简介","生长环境","栽培方法"],classificationList:[{label:"类别",value:"一种观赏植物"}]}},mounted(){console.log(this.$route.query.outputName),this.getPlantData()},methods:{async getPlantData(){try{const e=await u.A.get("/api/PlantFind/findFavors"),t=e.data;if(t.message)return void console.log(t.message);this.plant.name=t.commonName,this.classificationList[0].value=t.category,this.plant.contents[0]=t.portrayal,this.plant.contents[1]=t.growthEnvironment,this.plant.contents[2]=t.careConditions}catch(e){console.error("获取植物数据时出错：",e)}},searchDatabase(){console.log(`Searching for: ${this.searchQuery}`)},GoBack(){this.$router.push("/search")},getFavoriteStatus(){},GoToFavorite(){this.isFavorited?this.unfavoritePlant():this.favoritePlant(),this.isFavorited=!this.isFavorited},unfavoritePlant(){console.log("进行取消收藏操作")},favoritePlant(){console.log("进行收藏操作")}}};const ra=(0,we.A)(na,[["render",aa],["__scopeId","data-v-d5b032c6"]]);var ia=ra,la=s.p+"img/user-avatar.597b32ab.jpg",ca=s.p+"img/error_background.6cc4ce89.jpg";const ua=e=>((0,a.Qi)("data-v-1609e1e6"),e=e(),(0,a.jt)(),e),da={class:"header"},ma=ua((()=>(0,a.Lk)("div",{class:"logo"},"Flowers Whispering",-1))),ha={key:0,class:"user-info"},pa={key:0,class:"username"},ka={class:"user-avatar-wrapper"},ga={class:"user-info-list"},va=ua((()=>(0,a.Lk)("div",{class:"error-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),Ca={class:"info-box"},La=ua((()=>(0,a.Lk)("img",{class:"info-image",src:ca,alt:"Info Image"},null,-1))),fa=ua((()=>(0,a.Lk)("p",{class:"info-text"},":(",-1))),ba=ua((()=>(0,a.Lk)("p",{class:"info-text"},"你似乎来到没有植物生长的荒原",-1)));function Pa(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("header",da,[ma,e.currentUser?((0,a.uX)(),(0,a.CE)("div",ha,[e.currentUser?((0,a.uX)(),(0,a.CE)("span",pa,(0,le.v_)(e.currentUser.username),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",ka,[e.currentUser?((0,a.uX)(),(0,a.CE)("img",{key:0,src:la,alt:"User Avatar",onClick:t[0]||(t[0]=t=>e.goToUserProfile())})):(0,a.Q3)("",!0),(0,a.Lk)("div",ga,[(0,a.Lk)("p",null,"用户名: "+(0,le.v_)(e.currentUser.username),1),(0,a.Lk)("p",null,"邮箱: "+(0,le.v_)(e.currentUser.email),1),(0,a.Lk)("p",null,"角色: "+(0,le.v_)(e.currentUser.role),1)])]),(0,a.Lk)("button",{class:"logout-button",onClick:t[1]||(t[1]=(...t)=>e.performLogout&&e.performLogout(...t))},(0,le.v_)("guest"===e.currentUser.role?"登录":"登出"),1)])):(0,a.Q3)("",!0)]),va,(0,a.Lk)("div",Ca,[La,fa,ba,(0,a.Lk)("button",{class:"return-button",onClick:t[2]||(t[2]=(...e)=>r.GoBack&&r.GoBack(...e))},"重新探索")])],64)}var wa={name:"FindError",methods:{GoBack(){this.$router.go(-1)}}};const ya=(0,we.A)(wa,[["render",Pa],["__scopeId","data-v-1609e1e6"]]);var Ea=ya;const Aa=e=>((0,a.Qi)("data-v-4d6e1234"),e=e(),(0,a.jt)(),e),Ta=Aa((()=>(0,a.Lk)("div",{class:"contribution-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),Ia={class:"recognition-content-form"},Ua=Aa((()=>(0,a.Lk)("h1",{class:"recognition-title"},"植物识图",-1))),Da={class:"recognition-image-upload"},Fa={class:"recognition-buttons"};function Qa(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[Ta,(0,a.Lk)("div",Ia,[Ua,(0,a.Lk)("div",Da,[(0,a.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>r.onFileChange&&r.onFileChange(...e)),accept:"image/*"},null,32)]),(0,a.Lk)("div",Fa,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.recognize&&r.recognize(...e)),class:"recognition-recognize-button"},"识别"),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.goBack&&r.goBack(...e)),class:"recognition-return-button"},"退出")])])],64)}var Ma={name:"Recognition",data(){return{selectedFile:null,outputName:"萝卜"}},methods:{onFileChange(e){this.selectedFile=e.target.files[0]},async recognize(){this.selectedFile?this.$router.push({path:"/information",query:{outputName:this.outputName}}):alert("请先上传一张图片")},goBack(){this.$router.go(-1)}}};const Ra=(0,we.A)(Ma,[["render",Qa],["__scopeId","data-v-4d6e1234"]]);var Xa=Ra,xa="data:image/png;base64,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",Sa=s.p+"img/button1.5b9c7e27.png",Na=s.p+"img/button2.0bbd6a27.png",Ba=s.p+"img/button3.6fc083ef.png";const Ga=e=>((0,a.Qi)("data-v-2863d288"),e=e(),(0,a.jt)(),e),Ha=Ga((()=>(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),Va={class:"user-interfacer"},Ja={class:"side-bar"},Oa={class:"user-info"},Ka={class:"user-name"},Za={class:"tabs"},za={class:"top-banner"},Wa=Ga((()=>(0,a.Lk)("img",{src:xa,alt:"User"},null,-1))),ja=[Wa],qa={key:0},Ya=Ga((()=>(0,a.Lk)("div",{class:"card-container"},[(0,a.Lk)("div",{class:"love-time-title1"}," 欢迎来到叶语花谣社区 ")],-1))),_a={class:"card-container1"},$a=Ga((()=>(0,a.Lk)("img",{src:Sa,alt:"Card 1"},null,-1))),en=Ga((()=>(0,a.Lk)("div",{class:"card-info"},"我的帖子",-1))),tn=[$a,en],sn=Ga((()=>(0,a.Lk)("img",{src:Na,alt:"Card 2"},null,-1))),on=Ga((()=>(0,a.Lk)("div",{class:"card-info"},"我的评论",-1))),an=[sn,on],nn=Ga((()=>(0,a.Lk)("img",{src:Ba,alt:"Card 3"},null,-1))),rn=Ga((()=>(0,a.Lk)("div",{class:"card-info"},"我的收藏",-1))),ln=[nn,rn],cn={key:1,class:"card-container"},un=Ga((()=>(0,a.Lk)("div",{class:"card-container"},[(0,a.Lk)("div",{class:"love-time-title1"}," 欢迎来到叶语花谣社区 ")],-1))),dn=[un],mn={key:2},hn={class:"post-container"},pn=Ga((()=>(0,a.Lk)("div",{class:"post-title"}," 发布帖子 ",-1))),kn={class:"form-group"},gn=Ga((()=>(0,a.Lk)("label",{for:"title",class:"form-label"},"标题:",-1))),vn={class:"form-group"},Cn=Ga((()=>(0,a.Lk)("label",{for:"content",class:"form-label"},"内容:",-1))),Ln={class:"form-buttons"},fn=Ga((()=>(0,a.Lk)("button",{type:"submit",class:"btn-submit"},"发布",-1))),bn={key:3},Pn={class:"information-box1"},wn={class:"post-container1"},yn=Ga((()=>(0,a.Lk)("h1",{class:"post-header1"},"帖子列表",-1))),En={class:"post-list1"},An=["onClick"],Tn={class:"post-title1"},In={class:"post-summary1"},Un={class:"post-info1"},Dn={class:"post-author1"},Fn={class:"post-time1"},Qn={class:"pagination-controls1"},Mn=["disabled"],Rn=["disabled"],Xn={class:"modal-title"},xn={class:"modal-content"},Sn={class:"modal-comments"},Nn=Ga((()=>(0,a.Lk)("h3",null,"评论：",-1))),Bn=Ga((()=>(0,a.Lk)("br",null,null,-1))),Gn={class:"modal-new-comment"},Hn={key:4,class:"contributors-container"},Vn=Ga((()=>(0,a.Lk)("h2",{class:"contributors-title"},"用户贡献榜",-1))),Jn={class:"contributors-list"},On={class:"user-rank"},Kn={class:"user-name"},Zn={class:"user-contribution"},zn={class:"pagination"},Wn=["disabled"],jn=["disabled"];function qn(e,t,s,n,r,i){const l=(0,a.g2)("Header"),c=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l),Ha,(0,a.Lk)("div",Va,[(0,a.Lk)("div",Ja,[(0,a.Lk)("div",Oa,[(0,a.Lk)("p",Ka,(0,le.v_)(r.userName),1),(0,a.Lk)("div",Za,[(0,a.Lk)("button",{class:(0,le.C4)({active:"HotPosts"===r.activeTab}),onClick:t[0]||(t[0]=e=>i.setActiveTab("HotPosts"))},"精选帖子",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"PersonalCenter"===r.activeTab}),onClick:t[1]||(t[1]=e=>i.setActiveTab("PersonalCenter"))},"个人中心",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"SentPost"===r.activeTab}),onClick:t[2]||(t[2]=e=>i.setActiveTab("SentPost"))},"帖子发布",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"ContributorsList"===r.activeTab}),onClick:t[3]||(t[3]=e=>i.setActiveTab("ContributorsList"))},"贡献榜单",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"home"===r.activeTab}),onClick:t[4]||(t[4]=(...e)=>i.GoToHome&&i.GoToHome(...e))},"返回首页",2)])])]),(0,a.Lk)("div",za,[(0,a.Lk)("button",{class:"user-button",onClick:t[5]||(t[5]=(...e)=>i.Gotouserpage&&i.Gotouserpage(...e))},ja)]),"PersonalCenter"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",qa,[Ya,(0,a.Lk)("div",_a,[(0,a.Lk)("div",{class:"card",onClick:t[6]||(t[6]=e=>i.GotoPostDetil())},tn),(0,a.Lk)("div",{class:"card",onClick:t[7]||(t[7]=e=>i.GoToMycomment())},an),(0,a.Lk)("div",{class:"card",onClick:t[8]||(t[8]=e=>i.GotoMyfavourite())},ln)])])):(0,a.Q3)("",!0),"Announcement"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",cn,dn)):(0,a.Q3)("",!0),"SentPost"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",mn,[(0,a.Lk)("div",hn,[pn,(0,a.Lk)("form",{onSubmit:t[12]||(t[12]=(0,o.D$)(((...e)=>i.submitPost&&i.submitPost(...e)),["prevent"]))},[(0,a.Lk)("div",kn,[gn,(0,a.bo)((0,a.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":t[9]||(t[9]=e=>r.title=e),class:"form-input",required:""},null,512),[[o.Jo,r.title]])]),(0,a.Lk)("div",vn,[Cn,(0,a.bo)((0,a.Lk)("textarea",{id:"content","onUpdate:modelValue":t[10]||(t[10]=e=>r.content=e),class:"form-textarea",rows:"5",required:""},null,512),[[o.Jo,r.content]])]),(0,a.Lk)("div",Ln,[fn,(0,a.Lk)("button",{type:"button",onClick:t[11]||(t[11]=(...e)=>i.discard&&i.discard(...e)),class:"btn-cancel"},"放弃")])],32)])])):(0,a.Q3)("",!0),"HotPosts"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",bn,[(0,a.Lk)("div",Pn,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=t=>e.searchQuery=t),placeholder:"搜索你喜欢的帖子！",class:"information-input1"},null,512),[[o.Jo,e.searchQuery]]),(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.searchDatabase&&i.searchDatabase(...e)),class:"information-button1"},"搜索")]),(0,a.Lk)("div",wn,[yn,(0,a.Lk)("ul",En,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedPosts,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.articleId,class:"post-item1",onClick:t=>i.showPostDetails(e)},[(0,a.Lk)("div",null,[(0,a.Lk)("h2",Tn,(0,le.v_)(e.title),1),(0,a.Lk)("p",In,(0,le.v_)(i.summarizeContent(e.content)),1)]),(0,a.Lk)("div",Un,[(0,a.Lk)("span",Dn,(0,le.v_)(e.username),1),(0,a.Lk)("span",Fn,(0,le.v_)(e.publishedDate),1)])],8,An)))),128))]),(0,a.Lk)("div",Qn,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>i.navigateToPrevious&&i.navigateToPrevious(...e)),disabled:1===r.currentPage},"上一页",8,Mn),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.navigateToNext&&i.navigateToNext(...e)),disabled:r.currentPage===i.totalPagesCount},"下一页",8,Rn)]),r.showModal?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:t[21]||(t[21]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[20]||(t[20]=(0,o.D$)((()=>{}),["stop"]))},[(0,a.Lk)("h2",Xn,(0,le.v_)(r.selectedPost.title),1),(0,a.Lk)("p",xn,(0,le.v_)(r.selectedPost.content),1),(0,a.Lk)("div",Sn,[Nn,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.postComment,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.commentId},(0,le.v_)(e.content),1)))),128))])]),Bn,(0,a.Lk)("div",Gn,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[17]||(t[17]=e=>r.newComment=e),placeholder:"添加评论..."},null,512),[[o.Jo,r.newComment]]),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.addComment&&i.addComment(...e))},"提交评论")]),(0,a.Lk)("button",{class:"modal-close-button",onClick:t[19]||(t[19]=(...e)=>i.closeModal&&i.closeModal(...e))},"关闭")])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),"ContributorsList"===r.activeTab?((0,a.uX)(),(0,a.CE)("div",Hn,[Vn,(0,a.Lk)("ul",Jn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedScores,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e.userId,class:"contributor-item"},[(0,a.Lk)("span",On,(0,le.v_)(t+1),1),(0,a.Lk)("span",Kn,(0,le.v_)(e.username),1),(0,a.Lk)("span",Zn,"贡献分数: "+(0,le.v_)(e.totalScore),1)])))),128))]),(0,a.Lk)("div",zn,[(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>i.navigateToPrevious&&i.navigateToPrevious(...e)),disabled:1===r.currentPage},"上一页",8,Wn),(0,a.Lk)("span",null,"页码 "+(0,le.v_)(r.currentPage)+" / "+(0,le.v_)(i.totalPages),1),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>i.navigateToNext&&i.navigateToNext(...e)),disabled:r.currentPage===i.totalPages},"下一页",8,jn)])])):(0,a.Q3)("",!0)]),(0,a.bF)(c)],64)}var Yn={components:{Header:Ee,Footer:Qe},name:"Community",data(){return{buttonImageUrl:"../catalog/images/user_example.png",userName:"Wuhuairline",activeTab:"HotPosts",isUserInfoVisible:!1,allPosts:[],userPosts:[],userScore:[],postComment:[],currentPage:1,scorePerPage:5,title:"",content:"",showModal:!1,selectedPost:null,newComment:"",currentPage:1,itemsPerPage:10,showDeleteConfirm:!1}},mounted(){window.scrollTo(0,0),this.startCarousel(),this.getAllPosts(),this.getUserPosts(),this.getUserScore()},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin"}),paginatedScores(){const e=(this.currentPage-1)*this.scorePerPage,t=this.currentPage*this.scorePerPage;return this.userScore.slice(e,t)},totalPages(){return Math.ceil(this.userScore.length/this.scorePerPage)},paginatedPosts(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.allPosts.slice(e,t)},totalPagesCount(){return Math.ceil(this.allPosts.length/this.itemsPerPage)}},methods:{...(0,c.i0)(["logout"]),async getAllPosts(){try{const e=await this.$store.dispatch("fetchAllPosts");console.log("帖子加载成功:",e),this.allPosts=e}catch(e){console.error("加载帖子失败:",e)}},async getUserPosts(){try{const e=await this.$store.dispatch("fetchUserPosts",this.currentUser.userId);console.log("帖子加载成功:",e),this.userPosts=e}catch(e){console.error("加载帖子失败:",e)}},async getUserScore(){try{const e=await this.$store.dispatch("fetchScoreRank");console.log("分数:",e),this.userScore=e}catch(e){console.error("加载帖子失败:",e)}},async fetchPostComments(e){try{const t=await this.$store.dispatch("fetchCommentsByPost",e);this.postComment=t}catch(t){console.error("获取帖子评论失败:",t)}},async searchDatabase(){if(console.log("搜索按钮点击成功"),""===this.searchQuery.trim())return alert("请输入搜索内容"),void this.getAllPosts();try{console.log("搜索请求发送中:",this.searchQuery);const e=await this.$store.dispatch("searchPosts",this.searchQuery);console.log("搜索成功:",e),e&&(this.allPosts=e,this.currentPage=1)}catch(e){console.error("搜索失败:",e),alert("搜索失败，请稍后再试")}},handleUserAvatarClick(){"guest"===this.currentUser.role?this.$router.push("/login"):this.goToUserProfile()},setActiveTab(e){this.activeTab=e},goToDetail(e){this.$router.push({name:"PostDetail",params:{id:e}})},startCarousel(){setInterval(this.nextSlide,3e3)},async submitPost(){if(this.title&&this.content)try{const e=await this.$store.dispatch("addPost",{title:this.title,content:this.content});e?(alert("帖子已发布成功!"),this.clearForm()):alert("发布失败，请稍后再试。")}catch(e){console.error("发布失败:",e),alert("发布失败，请稍后再试。")}else alert("请填写标题和内容")},discard(){this.clearForm()},clearForm(){this.title="",this.content=""},Gotouserpage(){this.$router.push("/userprofile")},GotoPostDetil(){this.$router.push("/postDetail")},GoToMycomment(){this.$router.push("/myComment")},GotoMyfavourite(){this.$router.push("/myfavourite")},GoToHome(){this.$router.push("/home")},summarizeContent(e){return e.length>100?e.slice(0,100)+"...":e},showPostDetails(e){this.selectedPost=e,this.showModal=!0,this.fetchPostComments(e.articleId)},closeModal(){this.showModal=!1,this.selectedPost=null},async addComment(){if(""!==this.newComment.trim())try{const e=await this.$store.dispatch("addComment",{articleId:this.selectedPost.articleId,content:this.newComment});e?(this.fetchPostComments(this.selectedPost.articleId),this.newComment="",console.log("评论添加成功")):console.error("评论添加失败")}catch(e){console.error("评论添加失败:",e)}},deletePost(){this.showDeleteConfirm=!0},confirmDelete(){const e=this.visiblePosts.findIndex((e=>e.id===this.selectedPost.id));-1!==e&&(this.visiblePosts.splice(e,1),this.closeModal()),this.showDeleteConfirm=!1},cancelDelete(){this.showDeleteConfirm=!1},navigateToPrevious(){this.currentPage>1&&this.currentPage--},navigateToNext(){this.currentPage<this.totalPagesCount&&this.currentPage++}}};const _n=(0,we.A)(Yn,[["render",qn],["__scopeId","data-v-2863d288"]]);var $n=_n;const er=e=>((0,a.Qi)("data-v-7ff4c4ee"),e=e(),(0,a.jt)(),e),tr={key:0,class:"container"},sr=er((()=>(0,a.Lk)("video",{autoplay:"",muted:"",loop:"",class:"background-video"},[(0,a.Lk)("source",{src:M,type:"video/mp4"})],-1))),or={class:"content-wrapper"},ar={class:"left-panel"},nr={class:"user-info-container"},rr=["src"],ir=er((()=>(0,a.Lk)("div",{class:"avatar-overlay"},"更换头像",-1))),lr={class:"user-details"},cr={class:"form-group"},ur=er((()=>(0,a.Lk)("label",{for:"username"},"用户名：",-1))),dr={class:"editable-field-container"},mr={key:0},hr={key:2,class:"error-message"},pr={class:"form-group"},kr=er((()=>(0,a.Lk)("label",{for:"role"},"身 份：",-1))),gr={class:"editable-field-container"},vr={class:"form-group"},Cr=er((()=>(0,a.Lk)("label",{for:"gender"},"性 别：",-1))),Lr={class:"editable-field-container"},fr={key:0},br=er((()=>(0,a.Lk)("option",{value:"男"},"男",-1))),Pr=er((()=>(0,a.Lk)("option",{value:"女"},"女",-1))),wr=er((()=>(0,a.Lk)("option",{value:"不愿透露"},"不愿透露",-1))),yr=[br,Pr,wr],Er={class:"form-group"},Ar=er((()=>(0,a.Lk)("label",{for:"language"},"语 言：",-1))),Tr={class:"editable-field-container"},Ir={key:0},Ur=er((()=>(0,a.Lk)("option",{value:"zh-CN"},"中文",-1))),Dr=er((()=>(0,a.Lk)("option",{value:"EN"},"英文",-1))),Fr=[Ur,Dr],Qr={class:"form-group"},Mr=er((()=>(0,a.Lk)("label",{for:"email"},"邮 箱：",-1))),Rr={class:"editable-field-container"},Xr={key:0},xr={key:2,class:"error-message"},Sr={class:"form-group"},Nr=er((()=>(0,a.Lk)("label",{for:"bio"},"简 介：",-1))),Br={class:"editable-field-container"},Gr={key:0},Hr={class:"form-group"},Vr=er((()=>(0,a.Lk)("label",{for:"registrationDate"},"注册时间：",-1))),Jr={class:"editable-field-container"},Or={class:"edit-button-container"},Kr={key:1,class:"edit-actions"},Zr={class:"logout-button-container"},zr={class:"right-panel"},Wr={class:"dropdown-container"},jr={key:0,class:"dropdown-menu"},qr=er((()=>(0,a.Lk)("hr",{class:"divider"},null,-1))),Yr={key:0,class:"selectedoption"},_r=["onClick"],$r={class:"post-title"},ei={class:"post-content"},ti={class:"post-meta"},si=["onClick"],oi={key:1,class:"selectedoption"},ai=["onClick"],ni={class:"post-title"},ri={class:"post-content"},ii={class:"post-meta"},li=["onClick"],ci={key:2,class:"selectedoption"},ui={class:"comment-title"},di={class:"comment-meta"},mi={class:"comment-left"},hi=er((()=>(0,a.Lk)("span",null," | ",-1))),pi={class:"comment-right"},ki=["onClick"],gi={key:0,class:"post-dialog"},vi={class:"post-dialog-content"},Ci={class:"post-dialog-header"},Li={class:"post-dialog-body"},fi={class:"post-dialog-footer"},bi=er((()=>(0,a.Lk)("p",null,"评论区：",-1))),Pi={class:"post-content"},wi={class:"post-content"},yi={key:1,class:"confirm-dialog"},Ei={class:"confirm-dialog-content"},Ai=er((()=>(0,a.Lk)("p",null,"确定要删除该帖子吗？",-1))),Ti={key:2,class:"confirm-dialog"},Ii={class:"confirm-dialog-content"},Ui=er((()=>(0,a.Lk)("p",null,"确定要取消收藏该帖子吗？",-1))),Di={key:3,class:"confirm-dialog"},Fi={class:"confirm-dialog-content"},Qi=er((()=>(0,a.Lk)("p",null,"确定要删除该评论吗？",-1))),Mi={key:4,class:"password-dialog-overlay"},Ri={class:"password-dialog"},Xi=er((()=>(0,a.Lk)("h3",null,"修改账户密码",-1))),xi={class:"form-group"},Si=er((()=>(0,a.Lk)("label",{for:"old-password"},"旧密码：",-1))),Ni={class:"form-group"},Bi=er((()=>(0,a.Lk)("label",{for:"new-password"},"新密码：",-1))),Gi={class:"form-group"},Hi=er((()=>(0,a.Lk)("label",{for:"confirm-password"},"确认新密码：",-1))),Vi={key:0,class:"error-message"},Ji={class:"dialog-actions"},Oi={key:5,class:"avatar-selection-overlay"},Ki={class:"avatar-selection-container"},Zi=er((()=>(0,a.Lk)("h3",null,"选择头像",-1))),zi={class:"avatar-grid"},Wi=["onClick"],ji=["src"],qi={key:0,class:"checkmark"},Yi={class:"edit-actions"},_i={key:1};function $i(e,t,s,n,r,i){const l=(0,a.g2)("Header"),c=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l),e.currentUser?((0,a.uX)(),(0,a.CE)("div",tr,[sr,(0,a.Lk)("div",or,[(0,a.Lk)("div",ar,[(0,a.Lk)("div",nr,[(0,a.Lk)("div",{class:"avatar-container",onClick:t[1]||(t[1]=(...e)=>i.openAvatarSelection&&i.openAvatarSelection(...e))},[(0,a.Lk)("img",{src:e.currentUser.avatar,alt:"用户头像",class:"avatar"},null,8,rr),ir,(0,a.Lk)("input",{type:"file",ref:"fileInput",onChange:t[0]||(t[0]=(...e)=>i.handleFileUpload&&i.handleFileUpload(...e)),accept:"image/*",style:{display:"none"}},null,544)]),(0,a.Lk)("div",lr,[(0,a.Lk)("div",cr,[ur,(0,a.Lk)("div",dr,[r.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",mr,(0,le.v_)(e.currentUser.username),1)),r.editing?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:1,type:"username","onUpdate:modelValue":t[2]||(t[2]=e=>r.userTemp.username=e),onInput:t[3]||(t[3]=(...e)=>i.validateUsername&&i.validateUsername(...e)),class:"fixed-input"},null,544)),[[o.Jo,r.userTemp.username]]):(0,a.Q3)("",!0),r.usernameError?((0,a.uX)(),(0,a.CE)("p",hr,(0,le.v_)(r.usernameError),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",pr,[kr,(0,a.Lk)("div",gr,[(0,a.Lk)("span",null,(0,le.v_)("user"==e.currentUser.userRole?"普通用户":"管理员"),1)])]),(0,a.Lk)("div",vr,[Cr,(0,a.Lk)("div",Lr,[r.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",fr,(0,le.v_)(e.currentUser.gender),1)),r.editing?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:1,"onUpdate:modelValue":t[4]||(t[4]=e=>r.userTemp.gender=e),class:"fixed-input"},yr,512)),[[o.u1,r.userTemp.gender]]):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Er,[Ar,(0,a.Lk)("div",Tr,[r.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Ir,(0,le.v_)("zh-CN"==e.currentUser.languagePreference?"中文":"英文"),1)),r.editing?(0,a.bo)(((0,a.uX)(),(0,a.CE)("select",{key:1,"onUpdate:modelValue":t[5]||(t[5]=e=>r.userTemp.languagePreference=e),class:"fixed-input"},Fr,512)),[[o.u1,r.userTemp.languagePreference]]):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Qr,[Mr,(0,a.Lk)("div",Rr,[r.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Xr,(0,le.v_)(e.currentUser.email),1)),r.editing?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:1,type:"email","onUpdate:modelValue":t[6]||(t[6]=e=>r.userTemp.email=e),onInput:t[7]||(t[7]=(...e)=>i.validateEmail&&i.validateEmail(...e)),class:"fixed-input"},null,544)),[[o.Jo,r.userTemp.email]]):(0,a.Q3)("",!0),r.emailError?((0,a.uX)(),(0,a.CE)("p",xr,(0,le.v_)(r.emailError),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Sr,[Nr,(0,a.Lk)("div",Br,[r.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Gr,(0,le.v_)(e.currentUser.bio),1)),r.editing?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:1,id:"bio","onUpdate:modelValue":t[8]||(t[8]=e=>r.userTemp.bio=e),class:"fixed-input"},null,512)),[[o.Jo,r.userTemp.bio]]):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",Hr,[Vr,(0,a.Lk)("div",Jr,[(0,a.Lk)("span",null,(0,le.v_)(e.currentUser.registrationTime),1)])]),(0,a.Lk)("div",Or,[r.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,class:"edit-button",onClick:t[9]||(t[9]=(...e)=>i.editUserInfo&&i.editUserInfo(...e))},"编辑个人信息")),r.editing?((0,a.uX)(),(0,a.CE)("div",Kr,[(0,a.Lk)("button",{class:"confirm-button",onClick:t[10]||(t[10]=(...e)=>i.confirmEdit&&i.confirmEdit(...e))},"确认"),(0,a.Lk)("button",{class:"cancel-button",onClick:t[11]||(t[11]=(...e)=>i.cancelEdit&&i.cancelEdit(...e))},"取消")])):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{class:"change-password-button",onClick:t[12]||(t[12]=e=>r.showChangePasswordDialog=!0)},"修改账户密码"),(0,a.Lk)("div",Zr,[(0,a.Lk)("button",{class:"logout-button",onClick:t[13]||(t[13]=(...e)=>i.performLogout&&i.performLogout(...e))},"退出登录")])])]),(0,a.Lk)("div",zr,[(0,a.Lk)("div",Wr,[(0,a.Lk)("div",{class:"dropdown-text",onClick:t[14]||(t[14]=(...e)=>i.toggleDropdown&&i.toggleDropdown(...e))},[(0,a.eW)((0,le.v_)(r.selectedText)+" ",1),(0,a.Lk)("span",{class:(0,le.C4)({triangle:!0,"triangle-rotate":r.showDropdown})},"▾",2)]),r.showDropdown?((0,a.uX)(),(0,a.CE)("ul",jr,[(0,a.Lk)("li",{onClick:t[15]||(t[15]=e=>i.selectOption("我的帖子"))},"我的帖子"),(0,a.Lk)("li",{onClick:t[16]||(t[16]=e=>i.selectOption("我的收藏"))},"我的收藏"),(0,a.Lk)("li",{onClick:t[17]||(t[17]=e=>i.selectOption("我的评论"))},"我的评论")])):(0,a.Q3)("",!0)]),qr,"我的帖子"===r.selectedText?((0,a.uX)(),(0,a.CE)("div",Yr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.posts,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.articleId,class:"post",onClick:t=>i.openPostDialog(e)},[(0,a.Lk)("h3",$r,(0,le.v_)(e.title),1),(0,a.Lk)("p",ei,(0,le.v_)(e.content),1),(0,a.Lk)("p",ti," 发布日期: "+(0,le.v_)(e.publishedDate),1),(0,a.Lk)("button",{class:"delete-button",onClick:(0,o.D$)((t=>i.confirmDelete(e)),["stop"])},"删除",8,si)],8,_r)))),128))])):(0,a.Q3)("",!0),"我的收藏"===r.selectedText?((0,a.uX)(),(0,a.CE)("div",oi,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.userFavors,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.articleId,class:"post",onClick:t=>i.openFavoriteDialog(e)},[(0,a.Lk)("h3",ni,(0,le.v_)(e.title),1),(0,a.Lk)("p",ri,(0,le.v_)(e.content),1),(0,a.Lk)("p",ii,"发布日期: "+(0,le.v_)(e.publishedDate),1),(0,a.Lk)("button",{class:"cancelFavorite-button",onClick:(0,o.D$)((t=>i.confirmCancelFavorite(e)),["stop"])},"取消收藏",8,li)],8,ai)))),128))])):(0,a.Q3)("",!0),"我的评论"===r.selectedText?((0,a.uX)(),(0,a.CE)("div",ci,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.userComments,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.commentId,class:"post"},[(0,a.Lk)("h3",ui,(0,le.v_)(e.content),1),(0,a.Lk)("div",di,[(0,a.Lk)("div",mi,[(0,a.Lk)("span",null,(0,le.v_)(e.username),1),hi,(0,a.Lk)("span",null,(0,le.v_)(e.createdDate),1)]),(0,a.Lk)("div",pi,[(0,a.Lk)("span",null,(0,le.v_)(e.title),1)])]),(0,a.Lk)("button",{class:"delete-comment",onClick:(0,o.D$)((t=>i.deleteComment(e)),["stop"])},"删除",8,ki)])))),128))])):(0,a.Q3)("",!0)]),r.showPostDialog?((0,a.uX)(),(0,a.CE)("div",gi,[(0,a.Lk)("div",vi,[(0,a.Lk)("div",Ci,[(0,a.Lk)("h3",null,(0,le.v_)(r.selectedPost.title),1),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.closePostDialog&&i.closePostDialog(...e)),class:"close-button"},"×")]),(0,a.Lk)("div",Li,[(0,a.Lk)("p",null,(0,le.v_)(r.selectedPost.content),1)]),(0,a.Lk)("div",fi,[bi,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.commentInPost,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.Lk)("span",Pi,(0,le.v_)(e.username)+":",1),(0,a.Lk)("span",wi,(0,le.v_)(e.content),1)])))),128))])])])])):(0,a.Q3)("",!0),r.showConfirmDialog?((0,a.uX)(),(0,a.CE)("div",yi,[(0,a.Lk)("div",Ei,[Ai,(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>i.deletepost(r.selectedPost))},"确认"),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},"取消")])])):(0,a.Q3)("",!0),r.showConfirmFavoriteDialog?((0,a.uX)(),(0,a.CE)("div",Ti,[(0,a.Lk)("div",Ii,[Ui,(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>i.cancelFavorite(r.selectedFavorite))},"确认"),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>i.cancelDialog&&i.cancelDialog(...e))},"取消")])])):(0,a.Q3)("",!0),r.showConfirmCommentDialog?((0,a.uX)(),(0,a.CE)("div",Di,[(0,a.Lk)("div",Fi,[Qi,(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>i.confirmComment(r.selectedComment))},"确认"),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>i.cancelCommentDialog&&i.cancelCommentDialog(...e))},"取消")])])):(0,a.Q3)("",!0),r.showChangePasswordDialog?((0,a.uX)(),(0,a.CE)("div",Mi,[(0,a.Lk)("div",Ri,[Xi,(0,a.Lk)("div",xi,[Si,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"old-password","onUpdate:modelValue":t[25]||(t[25]=e=>r.oldPassword=e)},null,512),[[o.Jo,r.oldPassword]])]),(0,a.Lk)("div",Ni,[Bi,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"new-password","onUpdate:modelValue":t[26]||(t[26]=e=>r.newPassword=e)},null,512),[[o.Jo,r.newPassword]])]),(0,a.Lk)("div",Gi,[Hi,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"confirm-password","onUpdate:modelValue":t[27]||(t[27]=e=>r.confirmPassword=e)},null,512),[[o.Jo,r.confirmPassword]])]),r.passwordError?((0,a.uX)(),(0,a.CE)("p",Vi,(0,le.v_)(r.passwordError),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",Ji,[(0,a.Lk)("button",{class:"confirm-button",onClick:t[28]||(t[28]=(...e)=>i.confirmChangePassword&&i.confirmChangePassword(...e))},"确认"),(0,a.Lk)("button",{class:"cancel-button",onClick:t[29]||(t[29]=(...e)=>i.cancelChangePassword&&i.cancelChangePassword(...e))},"取消")])])])):(0,a.Q3)("",!0),e.showAvatarSelection?((0,a.uX)(),(0,a.CE)("div",Oi,[(0,a.Lk)("div",Ki,[Zi,(0,a.Lk)("div",zi,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.avatarOptions,((t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,le.C4)({"avatar-option":!0,selected:e.selectedAvatar===t}),onClick:s=>e.selectAvatar(t)},[(0,a.Lk)("img",{src:t,class:"avatar-image"},null,8,ji),e.selectedAvatar===t?((0,a.uX)(),(0,a.CE)("div",qi,"✔")):(0,a.Q3)("",!0)],10,Wi)))),128))]),(0,a.Lk)("div",Yi,[(0,a.Lk)("button",{class:"confirm-button",onClick:t[30]||(t[30]=(...t)=>e.confirmAvatar&&e.confirmAvatar(...t))},"确认"),(0,a.Lk)("button",{class:"cancel-button",onClick:t[31]||(t[31]=(...t)=>e.cancelAvatarSelection&&e.cancelAvatarSelection(...t))},"取消")])])])):(0,a.Q3)("",!0),(0,a.bF)(c)])])):((0,a.uX)(),(0,a.CE)("div",_i," 加载中... "))],64)}var el={components:{Header:Ee,Footer:Qe},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin",userAvatar:"userAvatar",isAuthenticated:"isAuthenticated",getPosts:"getPosts",userComment:"commentsByUser"}),posts(){return this.userPosts},commentInPost(){return this.postComment}},data(){return{userComments:[],userPosts:[],userFavors:[],postComment:[],showChangePasswordDialog:!1,passwordError:"",oldPassword:"",newPassword:"",confirmPassword:"",showPostDialog:!1,showConfirmDialog:!1,selectedPost:null,showDropdown:!1,selectedText:"我的评论",showConfirmFavoriteDialog:!1,selectedFavorite:null,selectedComment:null,showConfirmCommentDialog:!1,userTemp:{},editing:!1,emailError:null,usernameError:null}},mounted(){this.fetchUserPosts(this.currentUser.userId).then((e=>{console.log("fetchUserPosts 返回的有效数据:",e),this.userPosts=e})).catch((e=>{console.error("获取帖子时出错:",e)})),this.$store.dispatch("fetchCommentsByUser",this.currentUser.userId).then((e=>{console.log("获取到的评论:",e),this.userComments=e})).catch((e=>{console.error("获取用户评论时出错:",e)})),this.getUserFavorites()},methods:{...(0,c.i0)({logout:"logout",setAvatar:"setAvatar",updateUserInfo:"updateUserInfo",fetchUserPosts:"fetchUserPosts",deletePost:"deletePost"}),async fetchPostComments(e){try{const t=await this.$store.dispatch("fetchCommentsByPost",e);this.postComment=t}catch(t){console.error("获取帖子评论失败:",t)}},async getUserFavorites(){try{const e=await this.$store.dispatch("fetchFavoritesByUser",this.currentUser.userId);console.log("收藏加载成功:",e),this.userFavors=e}catch(e){console.error("加载收藏失败:",e)}},editUserInfo(){this.userTemp={...this.currentUser},this.editing=!0},validateUsername(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(this.userTemp.username)?this.usernameError="用户名不能是邮箱格式":this.usernameError=null},validateEmail(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.test(this.userTemp.email)?this.emailError=null:this.emailError="请输入有效的邮箱地址"},async confirmEdit(){if(!this.emailError&&!this.usernameError&&this.editing)try{await this.updateUserInfo({username:this.userTemp.username,email:this.userTemp.email,password:this.userTemp.password,languagePreference:this.userTemp.languagePreference,bio:this.userTemp.bio,avatar:this.userTemp.avatar,gender:this.userTemp.gender}),this.editing=!1}catch(e){console.error("更新失败:",e),alert("更新用户信息失败，请稍后重试。")}},toggleUserMenu(){this.showUserMenu=!this.showUserMenu},handleUserAvatarClick(){"guest"===this.currentUser.role?this.$router.push("/login"):this.goToUserProfile()},cancelEdit(){this.editing=!1,this.emailError=null},openAvatarSelection(){this.$refs.fileInput.click()},handleFileUpload(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{this.selectedAvatar=e.target.result,this.updateUserAvatar()},e.readAsDataURL(t)}},async updateUserAvatar(){try{await this.updateUserInfo({username:this.currentUser.username,email:this.currentUser.email,password:this.currentUser.password,languagePreference:this.currentUser.languagePreference,bio:this.currentUser.bio,avatar:this.selectedAvatar,gender:this.currentUser.gender})}catch(e){console.error("更新头像失败:",e),alert("更新头像失败，请稍后再试。")}},goToCatalog(){this.$router.push("/catalog")},goToCommunity(){this.$router.push("/community")},goToAdminPanel(){this.$router.push("/adminpanel")},goHome(){this.$router.push("/home")},performLogout(){this.logout(),this.$router.push("/login")},goToUserProfile(){this.$router.push("/userprofile")},confirmDelete(e){this.selectedPost=e,this.showConfirmDialog=!0},deletepost(e){this.deletePost(e.articleId),this.userPosts=this.userPosts.filter((t=>t.articleId!==e.articleId)),this.showConfirmDialog=!1,this.selectedPost=null},cancelDelete(){this.showConfirmDialog=!1,this.selectedPost=null},openPostDialog(e){this.selectedPost=e,this.showPostDialog=!0,this.fetchPostComments(e.articleId)},closePostDialog(){this.showPostDialog=!1,this.selectedPost=null},async confirmChangePassword(){if(this.passwordError="",this.newPassword===this.confirmPassword)if(this.oldPassword===this.currentUser.password)if(this.newPassword!==this.oldPassword)if(this.newPassword.length<8||this.newPassword.length>20)this.passwordError="新密码长度应为 8 到 20 位";else try{await this.updateUserInfo({username:this.currentUser.username,email:this.currentUser.email,password:this.newPassword,languagePreference:this.currentUser.languagePreference,bio:this.currentUser.bio,avatar:this.currentUser.avatar,gender:this.currentUser.gender}),alert("密码修改成功"),this.cancelChangePassword()}catch(e){console.error("更新密码失败:",e),alert("更新密码失败，请稍后再试")}else this.passwordError="新密码不能与旧密码相同";else this.passwordError="旧密码不正确";else this.passwordError="新密码与确认密码不匹配"},cancelChangePassword(){this.showChangePasswordDialog=!1,this.oldPassword="",this.newPassword="",this.confirmPassword="",this.passwordError=""},openFavoriteDialog(e){this.selectedPost=e,this.showPostDialog=!0,this.fetchPostComments(e.articleId)},confirmCancelFavorite(e){this.selectedFavorite=e,this.showConfirmFavoriteDialog=!0},cancelFavorite(e){console.log("favor:",e.favorId),this.$store.dispatch("deleteFavorite",e.favorId),this.userFavors=this.userFavors.filter((t=>t.favorId!==e.favorId)),this.showConfirmFavoriteDialog=!1,this.selectedFavorite=null},cancelDialog(){this.showConfirmFavoriteDialog=!1,this.selectedFavorite=null},confirmComment(e){this.$store.dispatch("deleteComment",e.commentId),console.log("comment:",e),this.userComments=this.userComments.filter((t=>t.commentId!==e.commentId)),this.showConfirmCommentDialog=!1,this.selectedComment=null},deleteComment(e){this.selectedComment=e,this.showConfirmCommentDialog=!0},cancelCommentDialog(){this.showConfirmCommentDialog=!1,this.selectedComment=null},toggleDropdown(){this.showDropdown=!this.showDropdown},selectOption(e){this.selectedText=e,this.showDropdown=!1}}};const tl=(0,we.A)(el,[["render",$i],["__scopeId","data-v-7ff4c4ee"]]);var sl=tl;const ol=e=>((0,a.Qi)("data-v-17dbaee6"),e=e(),(0,a.jt)(),e),al=ol((()=>(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),nl={class:"user-interfacer"},rl={class:"side-bar"},il={class:"user-info"},ll={class:"user-name"},cl={class:"tabs"},ul={class:"top-banner"},dl=ol((()=>(0,a.Lk)("img",{src:xa,alt:"User"},null,-1))),ml=ol((()=>(0,a.Lk)("span",{class:"tooltip"},"个人中心",-1))),hl=[dl,ml],pl={class:"post-container1"},kl=ol((()=>(0,a.Lk)("h1",{class:"post-header1"},"我的帖子",-1))),gl={class:"post-list1"},vl=["onClick"],Cl={class:"post-title1"},Ll={class:"post-summary1"},fl={class:"post-info1"},bl={class:"post-author1"},Pl={class:"post-time1"},wl={class:"pagination-controls1"},yl=["disabled"],El=["disabled"],Al={class:"modal-title"},Tl={class:"modal-content"},Il={class:"modal-comments"},Ul=ol((()=>(0,a.Lk)("h3",null,"评论：",-1))),Dl=ol((()=>(0,a.Lk)("br",null,null,-1))),Fl={class:"modal-new-comment"},Ql=ol((()=>(0,a.Lk)("h2",null,"确认删除",-1))),Ml=ol((()=>(0,a.Lk)("p",null,"您确定要删除此帖子吗？",-1)));function Rl(e,t,s,n,r,i){const l=(0,a.g2)("Header"),c=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l),al,(0,a.Lk)("div",nl,[(0,a.Lk)("div",rl,[(0,a.Lk)("div",il,[(0,a.Lk)("p",ll,(0,le.v_)(e.userName),1),(0,a.Lk)("div",cl,[(0,a.Lk)("button",{class:(0,le.C4)({active:"Mypost"===r.activeTab}),onClick:t[0]||(t[0]=e=>i.setActiveTab("Mypost"))},"我的帖子",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Mycomment"===r.activeTab}),onClick:t[1]||(t[1]=e=>i.GoToMycomment())},"我的评论",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Myfavourite"===r.activeTab}),onClick:t[2]||(t[2]=(...e)=>i.GotoMyfavourite&&i.GotoMyfavourite(...e))},"我的收藏",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"home"===r.activeTab}),onClick:t[3]||(t[3]=(...e)=>i.goToCommunity&&i.goToCommunity(...e))},"返回上步",2)])])]),(0,a.Lk)("div",ul,[(0,a.Lk)("button",{class:"user-button",onClick:t[4]||(t[4]=(...t)=>e.GotoPersonalCenter&&e.GotoPersonalCenter(...t))},hl)]),(0,a.Lk)("div",pl,[kl,(0,a.Lk)("ul",gl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedPosts,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.articleId,class:"post-item1",onClick:t=>i.showPostDetails(e)},[(0,a.Lk)("div",null,[(0,a.Lk)("h2",Cl,(0,le.v_)(e.title),1),(0,a.Lk)("p",Ll,(0,le.v_)(i.summarizeContent(e.content)),1)]),(0,a.Lk)("div",fl,[(0,a.Lk)("span",bl,(0,le.v_)(e.username),1),(0,a.Lk)("span",Pl,(0,le.v_)(e.publishedDate),1)])],8,vl)))),128))]),(0,a.Lk)("div",wl,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.navigateToPrevious&&i.navigateToPrevious(...e)),disabled:1===r.currentPage},"上一页",8,yl),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.navigateToNext&&i.navigateToNext(...e)),disabled:r.currentPage===i.totalPagesCount},"下一页",8,El)]),r.showModal?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:t[12]||(t[12]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[11]||(t[11]=(0,o.D$)((()=>{}),["stop"]))},[(0,a.Lk)("h2",Al,(0,le.v_)(r.selectedPost.title),1),(0,a.Lk)("p",Tl,(0,le.v_)(r.selectedPost.content),1),(0,a.Lk)("div",Il,[Ul,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.postComment,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.commentId},(0,le.v_)(e.content),1)))),128))])]),Dl,(0,a.Lk)("div",Fl,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.newComment=e),placeholder:"添加评论..."},null,512),[[o.Jo,r.newComment]]),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.addComment&&i.addComment(...e))},"提交评论")]),(0,a.Lk)("button",{class:"modal-delete-button",onClick:t[9]||(t[9]=(...e)=>i.deletePost&&i.deletePost(...e))},"删除帖子"),(0,a.Lk)("button",{class:"modal-close-button",onClick:t[10]||(t[10]=(...e)=>i.closeModal&&i.closeModal(...e))},"关闭")])])):(0,a.Q3)("",!0)]),r.showDeleteConfirm?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"delete-confirm-overlay",onClick:t[16]||(t[16]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},[(0,a.Lk)("div",{class:"delete-confirm-content",onClick:t[15]||(t[15]=(0,o.D$)((()=>{}),["stop"]))},[Ql,Ml,(0,a.Lk)("button",{onClick:t[13]||(t[13]=e=>i.confirmDelete(r.selectedPost))},"确认"),(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},"取消")])])):(0,a.Q3)("",!0)]),(0,a.bF)(c)],64)}var Xl={name:"Community",components:{Header:Ee,Footer:Qe},data(){return{buttonImageUrl:"../catalog/images/user_example.png",activeTab:"Mypost",isUserInfoVisible:!1,userPosts:[],postComment:[],showModal:!1,selectedPost:null,newComment:"",currentPage:1,itemsPerPage:4,showDeleteConfirm:!1}},mounted(){window.scrollTo(0,0),this.getUserPosts()},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin"}),paginatedPosts(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.userPosts.slice(e,t)},totalPagesCount(){return Math.ceil(this.userPosts.length/this.itemsPerPage)}},methods:{...(0,c.i0)(["logout"]),async getUserPosts(){try{const e=await this.$store.dispatch("fetchUserPosts",this.currentUser.userId);console.log("帖子加载成功:",e),this.userPosts=e}catch(e){console.error("加载帖子失败:",e)}},async fetchPostComments(e){try{const t=await this.$store.dispatch("fetchCommentsByPost",e);this.postComment=t}catch(t){console.error("获取帖子评论失败:",t)}},async addComment(){if(""!==this.newComment.trim())try{const e=await this.$store.dispatch("addComment",{articleId:this.selectedPost.articleId,content:this.newComment});e?(this.fetchPostComments(this.selectedPost.articleId),this.newComment="",console.log("评论添加成功")):console.error("评论添加失败")}catch(e){console.error("评论添加失败:",e)}},handleUserAvatarClick(){"guest"===this.currentUser.role?this.$router.push("/login"):this.goToUserProfile()},setActiveTab(e){this.activeTab=e},summarizeContent(e){return e.length>100?e.slice(0,100)+"...":e},navigateToPrevious(){this.currentPage>1&&this.currentPage--},navigateToNext(){this.currentPage<this.totalPagesCount&&this.currentPage++},GotoMyfavourite(){this.$router.push("/myfavourite")},GoToMycomment(){this.$router.push("/myComment")},Gotouserpage(){this.$router.push("/userprofile")},GotoPostDetil(){this.$router.push("/postDetail")},goToCommunity(){this.$router.push("/community")},GoToHome(){this.$router.push("/home")},summarizeContent(e){return e.length>100?e.slice(0,100)+"...":e},showPostDetails(e){this.selectedPost=e,this.showModal=!0,this.fetchPostComments(e.articleId)},closeModal(){this.showModal=!1,this.selectedPost=null},deletePost(){this.showDeleteConfirm=!0},confirmDelete(e){console.log("post:",e.articleId),this.$store.dispatch("deletePost",e.articleId),this.userPosts=this.userPosts.filter((t=>t.articleId!==e.articleId)),this.closeModal(),this.showDeleteConfirm=!1},cancelDelete(){this.showDeleteConfirm=!1}}};const xl=(0,we.A)(Xl,[["render",Rl],["__scopeId","data-v-17dbaee6"]]);var Sl=xl;const Nl=e=>((0,a.Qi)("data-v-4ce319ca"),e=e(),(0,a.jt)(),e),Bl={class:"header"},Gl=Nl((()=>(0,a.Lk)("div",{class:"logo"},"Flowers Whispering",-1))),Hl={class:"nav-user-container"},Vl={class:"nav-links"},Jl={class:"user-info"},Ol={class:"user-avatar-wrapper"},Kl=["src"],Zl={class:"user-info-list"},zl={key:0},Wl=Nl((()=>(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),jl={class:"user-interfacer"},ql={class:"side-bar"},Yl={class:"user-info"},_l={class:"user-name"},$l={class:"tabs"},ec={class:"top-banner"},tc=Nl((()=>(0,a.Lk)("img",{src:xa,alt:"User"},null,-1))),sc=Nl((()=>(0,a.Lk)("span",{class:"tooltip"},"个人中心",-1))),oc=[tc,sc],ac={class:"post-container1"},nc=Nl((()=>(0,a.Lk)("h1",{class:"post-header1"},"我的评论",-1))),rc={class:"post-list1"},ic={class:"post-title1"},lc={class:"comment-text1"},cc=["onClick"],uc=["onClick"],dc={class:"pagination-controls1"},mc=["disabled"],hc=["disabled"],pc={class:"modal-title"},kc={class:"modal-content"},gc={class:"modal-comments"},vc=Nl((()=>(0,a.Lk)("h3",null,"评论：",-1))),Cc=Nl((()=>(0,a.Lk)("br",null,null,-1))),Lc={class:"modal-new-comment"},fc=Nl((()=>(0,a.Lk)("h2",null,"确认删除",-1))),bc=Nl((()=>(0,a.Lk)("p",null,"您确定要删除此评论吗？",-1))),Pc=(0,a.Fv)('<footer class="footer" data-v-4ce319ca><p class="left" data-v-4ce319ca><a href="contact.html" data-v-4ce319ca>联系我们</a></p><p class="center" data-v-4ce319ca>© 2024 Flowers Whispering</p><div class="right" data-v-4ce319ca></div></footer>',1);function wc(e,t,s,n,r,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("header",Bl,[Gl,(0,a.Lk)("div",Hl,[(0,a.Lk)("nav",Vl,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.goToHome&&e.goToHome(...t)),class:"nav-button"},"首页"),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.goToCommunity&&i.goToCommunity(...e)),class:"nav-button"},"社区"),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.goToCatalog&&e.goToCatalog(...t)),class:"nav-button"},"图鉴")]),(0,a.Lk)("div",Jl,[(0,a.Lk)("div",Ol,[(0,a.Lk)("img",{src:e.userAvatar,alt:"User Avatar",onClick:t[3]||(t[3]=(...e)=>i.handleUserAvatarClick&&i.handleUserAvatarClick(...e))},null,8,Kl),(0,a.Lk)("div",Zl,["guest"!==e.currentUser.role?((0,a.uX)(),(0,a.CE)("div",zl,[(0,a.Lk)("p",null,"用户名: "+(0,le.v_)(e.currentUser.username),1),(0,a.Lk)("p",null,"邮箱: "+(0,le.v_)(e.currentUser.email),1),(0,a.Lk)("p",null,"角色: "+(0,le.v_)(e.currentUser.userRole),1)])):(0,a.Q3)("",!0)])])])])]),Wl,(0,a.Lk)("div",jl,[(0,a.Lk)("div",ql,[(0,a.Lk)("div",Yl,[(0,a.Lk)("p",_l,(0,le.v_)(r.userName),1),(0,a.Lk)("div",$l,[(0,a.Lk)("button",{class:(0,le.C4)({active:"Mypost"===r.activeTab}),onClick:t[4]||(t[4]=e=>i.GotoPostDetil())},"我的帖子",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Mycomment"===r.activeTab}),onClick:t[5]||(t[5]=e=>i.setActiveTab("Mycomment"))},"我的评论",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Myfavourite"===r.activeTab}),onClick:t[6]||(t[6]=e=>i.GotoMyfavourite())},"我的收藏",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"home"===r.activeTab}),onClick:t[7]||(t[7]=(...e)=>i.goToCommunity&&i.goToCommunity(...e))},"返回上步",2)])])]),(0,a.Lk)("div",ec,[(0,a.Lk)("button",{class:"user-button",onClick:t[8]||(t[8]=(...t)=>e.GotoPersonalCenter&&e.GotoPersonalCenter(...t))},oc)]),(0,a.Lk)("div",ac,[nc,(0,a.Lk)("ul",rc,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedComments,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.commentId,class:"post-item1"},[(0,a.Lk)("div",null,[(0,a.Lk)("p",ic,"评论内容： "+(0,le.v_)(e.content),1),(0,a.Lk)("p",lc,"帖子标题： "+(0,le.v_)(e.articleTitle),1)]),(0,a.Lk)("button",{class:"view-post-button",onClick:t=>i.showPostDetails(e.articleId)},"查看帖子",8,cc),(0,a.Lk)("button",{class:"delete-comment-button",onClick:t=>i.deleteComment(e)},"删除评论",8,uc)])))),128))]),(0,a.Lk)("div",dc,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.navigateToPrevious&&i.navigateToPrevious(...e)),disabled:1===r.currentPage},"上一页",8,mc),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>i.navigateToNext&&i.navigateToNext(...e)),disabled:r.currentPage===i.totalPagesCount},"下一页",8,hc)]),r.showModal?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:t[15]||(t[15]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[14]||(t[14]=(0,o.D$)((()=>{}),["stop"]))},[(0,a.Lk)("h2",pc,(0,le.v_)(e.selectedPost.title),1),(0,a.Lk)("p",kc,(0,le.v_)(e.selectedPost.content),1),(0,a.Lk)("div",gc,[vc,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.postComment,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.commentId},(0,le.v_)(e.content),1)))),128))])]),Cc,(0,a.Lk)("div",Lc,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.newComment=e),placeholder:"添加评论..."},null,512),[[o.Jo,r.newComment]]),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.addComment&&i.addComment(...e))},"提交评论")]),(0,a.Lk)("button",{class:"modal-close-button",onClick:t[13]||(t[13]=(...e)=>i.closeModal&&i.closeModal(...e))},"关闭")])])):(0,a.Q3)("",!0)]),r.showDeleteConfirm?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"delete-confirm-overlay",onClick:t[19]||(t[19]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},[(0,a.Lk)("div",{class:"delete-confirm-content",onClick:t[18]||(t[18]=(0,o.D$)((()=>{}),["stop"]))},[fc,bc,(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.confirmDelete&&i.confirmDelete(...e))},"确认"),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},"取消")])])):(0,a.Q3)("",!0)]),Pc],64)}var yc={name:"Mycomment",data(){return{buttonImageUrl:"../catalog/images/user_example.png",userName:"Wuhuairline",activeTab:"Mycomment",isUserInfoVisible:!1,userComment:[],allPosts:[],postComment:[],showModal:!1,selectedComment:null,newComment:"",currentPage:1,itemsPerPage:5,showDeleteConfirm:!1,commentsData:[]}},mounted(){window.scrollTo(0,0),this.getUserComment(),this.getAllPosts()},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin"}),totalPagesCount(){return Math.ceil(this.userComment.length/this.itemsPerPage)},paginatedComments(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.userComment.slice(e,t)}},methods:{...(0,c.i0)(["logout"]),async getUserComment(){try{const e=await this.$store.dispatch("fetchCommentsByUser",this.currentUser.userId);console.log("评论加载成功:",e),this.userComment=e}catch(e){console.error("加载评论失败:",e)}},async getAllPosts(){try{const e=await this.$store.dispatch("fetchAllPosts");console.log("所有帖子加载成功:",e),this.allPosts=e}catch(e){console.error("加载评论失败:",e)}},async fetchPostComments(e){try{const t=await this.$store.dispatch("fetchCommentsByPost",e);this.postComment=t}catch(t){console.error("获取帖子评论失败:",t)}},async addComment(){if(""!==this.newComment.trim())try{const e=await this.$store.dispatch("addComment",{articleId:this.selectedPost.articleId,content:this.newComment});e?(this.fetchPostComments(this.selectedPost.articleId),this.newComment="",console.log("评论添加成功"),this.getUserComment()):console.error("评论添加失败")}catch(e){console.error("评论添加失败:",e)}},handleUserAvatarClick(){"guest"===this.currentUser.role?this.$router.push("/login"):this.goToUserProfile()},setActiveTab(e){this.activeTab=e},summarizeContent(e){return e.length>100?e.slice(0,100)+"...":e},GotoMyfavourite(){this.$router.push("/myfavourite")},Gotouserpage(){this.$router.push("/userprofile")},GotoPostDetil(){this.$router.push("/postDetail")},goToCommunity(){this.$router.push("/community")},GoToHome(){this.$router.push("/home")},navigateToPrevious(){this.currentPage>1&&this.currentPage--},navigateToNext(){this.currentPage<this.totalPagesCount&&this.currentPage++},getPostTitle(e){const t=this.postsData.find((t=>t.id===e));return t?t.title:"未知标题"},showPostDetails(e){this.selectedPost=this.allPosts.find((t=>t.articleId===e)),this.showModal=!0,this.fetchPostComments(e)},closeModal(){this.showModal=!1,this.selectedPost=null},deletePost(){this.showDeleteConfirm=!0},confirmDelete(){this.$store.dispatch("deleteComment",this.selectedComment.commentId),this.userComment=this.userComment.filter((e=>e.commentId!==this.selectedComment.commentId)),this.showDeleteConfirm=!1},cancelDelete(){this.showDeleteConfirm=!1},deleteComment(e){this.selectedComment=e,this.showDeleteConfirm=!0}}};const Ec=(0,we.A)(yc,[["render",wc],["__scopeId","data-v-4ce319ca"]]);var Ac=Ec;const Tc=e=>((0,a.Qi)("data-v-cdcfc906"),e=e(),(0,a.jt)(),e),Ic={class:"header"},Uc=Tc((()=>(0,a.Lk)("div",{class:"logo"},"Flowers Whispering",-1))),Dc={class:"nav-user-container"},Fc={class:"nav-links"},Qc={class:"user-info"},Mc={class:"user-avatar-wrapper"},Rc=["src"],Xc={class:"user-info-list"},xc={key:0},Sc=Tc((()=>(0,a.Lk)("div",{class:"book-background"},[(0,a.Lk)("div",{id:"videoContainer"},[(0,a.Lk)("video",{class:"fullscreenVideo",id:"kotoba",playsinline:"",autoplay:"",muted:"",loop:""},[(0,a.Lk)("source",{src:M,type:"video/mp4"})])])],-1))),Nc={class:"user-interfacer"},Bc={class:"side-bar"},Gc={class:"user-info"},Hc={class:"user-name"},Vc={class:"tabs"},Jc={class:"top-banner"},Oc=Tc((()=>(0,a.Lk)("img",{src:xa,alt:"User"},null,-1))),Kc=Tc((()=>(0,a.Lk)("span",{class:"tooltip"},"个人中心",-1))),Zc=[Oc,Kc],zc={class:"post-container1"},Wc=Tc((()=>(0,a.Lk)("h1",{class:"post-header1"},"我的收藏",-1))),jc={class:"post-list1"},qc=["onClick"],Yc={class:"post-title1"},_c={class:"post-summary1"},$c={class:"post-info1"},eu={class:"post-time1"},tu={class:"pagination-controls1"},su=["disabled"],ou=["disabled"],au={class:"modal-title"},nu={class:"modal-content"},ru={class:"modal-comments"},iu=Tc((()=>(0,a.Lk)("h3",null,"评论：",-1))),lu=Tc((()=>(0,a.Lk)("br",null,null,-1))),cu={class:"modal-new-comment"},uu=Tc((()=>(0,a.Lk)("h2",null,"确认解除收藏",-1))),du=Tc((()=>(0,a.Lk)("p",null,"您确定要解除收藏此帖子吗？",-1))),mu=(0,a.Fv)('<footer class="footer" data-v-cdcfc906><p class="left" data-v-cdcfc906><a href="contact.html" data-v-cdcfc906>联系我们</a></p><p class="center" data-v-cdcfc906>© 2024 Flowers Whispering</p><div class="right" data-v-cdcfc906></div></footer>',1);function hu(e,t,s,n,r,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("header",Ic,[Uc,(0,a.Lk)("div",Dc,[(0,a.Lk)("nav",Fc,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.goToHome&&e.goToHome(...t)),class:"nav-button"},"首页"),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.goToCommunity&&i.goToCommunity(...e)),class:"nav-button"},"社区"),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.goToCatalog&&e.goToCatalog(...t)),class:"nav-button"},"图鉴")]),(0,a.Lk)("div",Qc,[(0,a.Lk)("div",Mc,[(0,a.Lk)("img",{src:e.userAvatar,alt:"User Avatar",onClick:t[3]||(t[3]=(...e)=>i.handleUserAvatarClick&&i.handleUserAvatarClick(...e))},null,8,Rc),(0,a.Lk)("div",Xc,["guest"!==e.currentUser.role?((0,a.uX)(),(0,a.CE)("div",xc,[(0,a.Lk)("p",null,"用户名: "+(0,le.v_)(e.currentUser.username),1),(0,a.Lk)("p",null,"邮箱: "+(0,le.v_)(e.currentUser.email),1),(0,a.Lk)("p",null,"角色: "+(0,le.v_)(e.currentUser.userRole),1)])):(0,a.Q3)("",!0)])])])])]),Sc,(0,a.Lk)("div",Nc,[(0,a.Lk)("div",Bc,[(0,a.Lk)("div",Gc,[(0,a.Lk)("p",Hc,(0,le.v_)(r.userName),1),(0,a.Lk)("div",Vc,[(0,a.Lk)("button",{class:(0,le.C4)({active:"Mypost"===r.activeTab}),onClick:t[4]||(t[4]=(...e)=>i.GotoPostDetil&&i.GotoPostDetil(...e))},"我的帖子",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Mycomment"===r.activeTab}),onClick:t[5]||(t[5]=(...e)=>i.GoToMycomment&&i.GoToMycomment(...e))},"我的评论",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"Myfavourite"===r.activeTab}),onClick:t[6]||(t[6]=e=>i.setActiveTab("Myfavourite"))},"我的收藏",2),(0,a.Lk)("button",{class:(0,le.C4)({active:"home"===r.activeTab}),onClick:t[7]||(t[7]=(...e)=>i.goToCommunity&&i.goToCommunity(...e))},"返回上步",2)])])]),(0,a.Lk)("div",Jc,[(0,a.Lk)("button",{class:"user-button",onClick:t[8]||(t[8]=(...t)=>e.GotoPersonalCenter&&e.GotoPersonalCenter(...t))},Zc)]),(0,a.Lk)("div",zc,[Wc,(0,a.Lk)("ul",jc,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.paginatedFavorites,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.favorId,class:"post-item1",onClick:t=>i.showPostDetails(e)},[(0,a.Lk)("div",null,[(0,a.Lk)("h2",Yc,(0,le.v_)(e.title),1),(0,a.Lk)("p",_c,(0,le.v_)(i.summarizeContent(e.content)),1)]),(0,a.Lk)("div",$c,[(0,a.Lk)("span",eu,(0,le.v_)(e.publishedDate),1)])],8,qc)))),128))]),(0,a.Lk)("div",tu,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.navigateToPrevious&&i.navigateToPrevious(...e)),disabled:1===r.currentPage},"上一页",8,su),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>i.navigateToNext&&i.navigateToNext(...e)),disabled:r.currentPage===i.totalPagesCount},"下一页",8,ou)]),r.showModal?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:t[16]||(t[16]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,a.Lk)("div",{class:"modal-content",onClick:t[15]||(t[15]=(0,o.D$)((()=>{}),["stop"]))},[(0,a.Lk)("h2",au,(0,le.v_)(r.selectedfavor.title),1),(0,a.Lk)("p",nu,(0,le.v_)(r.selectedfavor.content),1),(0,a.Lk)("div",ru,[iu,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.postComment,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.commentId},(0,le.v_)(e.content),1)))),128))])]),lu,(0,a.Lk)("div",cu,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.newComment=e),placeholder:"添加评论..."},null,512),[[o.Jo,r.newComment]]),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.addComment&&i.addComment(...e))},"提交评论")]),(0,a.Lk)("button",{class:"modal-delete-button",onClick:t[13]||(t[13]=(...e)=>i.deletePost&&i.deletePost(...e))},"解除收藏"),(0,a.Lk)("button",{class:"modal-close-button",onClick:t[14]||(t[14]=(...e)=>i.closeModal&&i.closeModal(...e))},"关闭")])])):(0,a.Q3)("",!0)]),r.showDeleteConfirm?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"delete-confirm-overlay",onClick:t[20]||(t[20]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},[(0,a.Lk)("div",{class:"delete-confirm-content",onClick:t[19]||(t[19]=(0,o.D$)((()=>{}),["stop"]))},[uu,du,(0,a.Lk)("button",{onClick:t[17]||(t[17]=e=>i.confirmDelete(r.selectedfavor))},"确认"),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.cancelDelete&&i.cancelDelete(...e))},"取消")])])):(0,a.Q3)("",!0)]),mu],64)}var pu={name:"Community",data(){return{buttonImageUrl:"../catalog/images/user_example.png",userName:"Wuhuairline",activeTab:"Myfavourite",isUserInfoVisible:!1,showModal:!1,selectedfavor:null,newComment:"",currentPage:1,userFavor:[],postComment:[],itemsPerPage:4,showDeleteConfirm:!1}},mounted(){window.scrollTo(0,0),this.getUserFavors()},computed:{...(0,c.L8)({currentUser:"getUserInfo",isAdmin:"isAdmin"}),paginatedFavorites(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.userFavor.slice(e,t)},totalPagesCount(){return Math.ceil(this.userFavor.length/this.itemsPerPage)}},methods:{...(0,c.i0)(["logout"]),async getUserFavors(){try{const e=await this.$store.dispatch("fetchFavoritesByUser",this.currentUser.userId);console.log("收藏加载成功:",e),this.userFavor=e}catch(e){console.error("加载收藏失败:",e)}},async fetchPostComments(e){try{const t=await this.$store.dispatch("fetchCommentsByPost",e);this.postComment=t}catch(t){console.error("获取帖子评论失败:",t)}},async addComment(){if(""!==this.newComment.trim())try{const e=await this.$store.dispatch("addComment",{articleId:this.selectedfavor.articleId,content:this.newComment});e?(this.fetchPostComments(this.selectedfavor.articleId),this.newComment="",console.log("评论添加成功")):console.error("评论添加失败")}catch(e){console.error("评论添加失败:",e)}},handleUserAvatarClick(){"guest"===this.currentUser.role?this.$router.push("/login"):this.goToUserProfile()},setActiveTab(e){this.activeTab=e},summarizeContent(e){return e.length>100?e.slice(0,100)+"...":e},GoToMycomment(){this.$router.push("/myComment")},Gotouserpage(){this.$router.push("/userprofile")},GotoPostDetil(){this.$router.push("/postDetail")},GotoMyfavourite(){this.$router.push("/myfavourite")},goToCommunity(){this.$router.push("/community")},GoToHome(){this.$router.push("/home")},summarizeContent(e){return e.length>100?e.slice(0,100)+"...":e},showPostDetails(e){this.selectedfavor=e,this.showModal=!0,this.fetchPostComments(e.articleId)},closeModal(){this.showModal=!1,this.selectedfavor=null},deletePost(){this.showDeleteConfirm=!0},confirmDelete(){console.log("post:",selectedfavor.favorId),this.$store.dispatch("deletePost",selectedfavor.favorId),this.userFavor=this.userFavor.filter((e=>e.favorId!==selectedfavor.favorId)),this.closeModal(),this.showDeleteConfirm=!1},cancelDelete(){this.showDeleteConfirm=!1},navigateToPrevious(){this.currentPage>1&&this.currentPage--},navigateToNext(){this.currentPage<this.totalPagesCount&&this.currentPage++}}};const ku=(0,we.A)(pu,[["render",hu],["__scopeId","data-v-cdcfc906"]]);var gu=ku;const vu=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:rt},{path:"/catalog",name:"Catalog",component:Ws,meta:{requiresAuth:!0}},{path:"/search",name:"Search",component:Xo,meta:{requiresAuth:!0}},{path:"/information",name:"Information",component:ia,meta:{requiresAuth:!0},props:e=>({outputName:e.query.outputName})},{path:"/FindError",name:"FindError",component:Ea,meta:{requiresAuth:!0}},{path:"/recognition",name:"Recognition",component:Xa,meta:{requiresAuth:!0}},{path:"/community",name:"Community",component:$n,meta:{requiresAuth:!0}},{path:"/userprofile",name:"UserProfile",component:sl,meta:{requiresAuth:!0}},{path:"/postDetail",name:"PostDetail",component:Sl,meta:{requiresAuth:!0}},{path:"/mycomment",name:"Mycomment",component:Ac,meta:{requiresAuth:!0}},{path:"/myfavourite",name:"Myfavourite",component:gu,meta:{requiresAuth:!0}},{path:"/home",name:"Home",component:Xe,meta:{requiresAuth:!0}},{path:"/adminpanel",name:"AdminPanel",component:Ts,meta:{requiresAuth:!0,requiresAdmin:!0}}],Cu=(0,l.aE)({history:(0,l.LA)("/"),routes:vu});Cu.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requiresAuth))?Q.getters.isAuthenticated?e.matched.some((e=>e.meta.requiresAdmin))?Q.getters.isAdmin?s():(alert("您无权访问该页面。"),s({name:"Home"})):s():(alert("请先登录!"),s({name:"Login"})):s()}));var Lu=Cu,fu=s(595),bu=s(6762);s(6263);Q.dispatch("restoreState");const Pu=(0,o.Ef)(i);Pu.config.globalProperties.emitter=(0,fu.A)(),Pu.use(Lu),Pu.use(bu.A),Pu.use(Q),Pu.mount("#app")},5323:function(e,t,s){e.exports=s.p+"img/plant_example.347c2e44.jpg"},6873:function(e,t,s){e.exports=s.p+"img/user-avatar.597b32ab.jpg"}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,n){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],n=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(l)var u=l(s)}for(t&&t(o);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},o=self["webpackChunkflowerswhispering"]=self["webpackChunkflowerswhispering"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(5378)}));o=s.O(o)})();
//# sourceMappingURL=app.8eb898b7.js.map